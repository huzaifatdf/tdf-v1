import{q as V,r as i,m as c,j as e,$ as A}from"./app-FiqTlAuv.js";import{A as F,E as I}from"./AuthenticatedLayout-CKICmM05.js";import{u as E,T as z,a as H,b as g,c as K,f as x,d as U,e as p,A as _,g as L,h as B,i as q,j as O}from"./table-BYLMW66P.js";import{i as $,D as j,j as C,B as t,k as w,l as J,T as G,q as Q,r as W,s as X,m as Y,n as f}from"./toast-CYu977no.js";import{C as S}from"./checkbox-B3DeHUp2.js";import{D as Z,a as ee,b as se,c as ae,d as le,e as te,f as ie}from"./dialog-CaustJjC.js";import{C as re}from"./chevron-down-dvWM5iFe.js";import{P as ne}from"./plus-DfZTkt2x.js";import"./createLucideIcon-BnawVl-O.js";import"./index-C5iOmN6S.js";import"./index-Bm5b80rQ.js";function we(){var m,u;const{users:r,filters:v,sort:N}=V().props,[n,b]=i.useState(N||[]),[o,D]=i.useState(v||[]),[y,R]=i.useState({}),[P,T]=i.useState({}),[d,M]=i.useState({pageIndex:r.current_page-1,pageSize:r.per_page}),h=[{id:"select",header:({table:s})=>e.jsx(S,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:s})=>e.jsx(S,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:"ID",cell:({row:s})=>e.jsx("div",{children:s.getValue("id")})},{accessorKey:"name",header:"Name",cell:({row:s})=>e.jsx("div",{children:s.getValue("name")})},{accessorKey:"email",header:({column:s})=>e.jsxs(t,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Email",e.jsx(_,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("email")})},{accessorKey:"role",header:"Role",cell:({row:s})=>e.jsx("div",{children:s.getValue("role")})},{accessorKey:"created_at",header:"Joined At",cell:({row:s})=>new Date(s.getValue("created_at")).toLocaleDateString()},{id:"actions",enableHiding:!1,cell:({row:s})=>{const a=s.original;return e.jsxs(j,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(t,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(I,{className:"h-4 w-4"})]})}),e.jsxs(w,{align:"end",children:[e.jsx(Y,{children:"Actions"}),e.jsx(f,{onClick:()=>c.get(route("user.edit",a.id)),className:"cursor-pointer",children:"Edit user"}),e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(f,{className:"cursor-pointer",onSelect:k=>k.preventDefault(),children:"Delete user"})}),e.jsxs(se,{className:"sm:max-w-[425px]",children:[e.jsxs(ae,{children:[e.jsx(le,{children:"Delete User"}),e.jsx(te,{children:"Are you sure you want to delete this user? This action cannot be undone."})]}),e.jsx("div",{className:"grid gap-4 py-4"}),e.jsx(ie,{children:e.jsx(t,{variant:"destructive",onClick:()=>{c.delete(route("user.destroy",a.id))},children:"Confirm Delete"})})]})]})]})]})}}];i.useEffect(()=>{const s={};o.length>0&&(s.filters=Object.fromEntries(o.map(a=>[a.id,a.value]))),n.length>0&&(s.sort={key:n[0].id,order:n[0].desc?"desc":"asc"}),s.page=d.pageIndex+1,s.perPage=d.pageSize,c.get(route("user.index"),s,{preserveState:!0,replace:!0})},[o,n,d]);const l=E({data:r.data,columns:h,pageCount:r.last_page,state:{sorting:n,columnFilters:o,columnVisibility:y,rowSelection:P,pagination:d},onSortingChange:b,onColumnFiltersChange:D,onColumnVisibilityChange:R,onRowSelectionChange:T,onPaginationChange:M,getCoreRowModel:O(),getPaginationRowModel:q(),getSortedRowModel:B(),getFilteredRowModel:L(),manualPagination:!0,manualSorting:!0,manualFiltering:!0});return e.jsxs(F,{children:[e.jsx(A,{title:"Users"}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4",children:[e.jsx($,{placeholder:"Filter emails...",value:((m=l.getColumn("email"))==null?void 0:m.getFilterValue())??"",onChange:s=>{var a;return(a=l.getColumn("email"))==null?void 0:a.setFilterValue(s.target.value)},className:"max-w-sm"}),e.jsxs(j,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(t,{variant:"outline",className:"ml-auto",children:["Columns ",e.jsx(re,{className:"ml-2 h-4 w-4"})]})}),e.jsx(w,{align:"end",children:l.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(J,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:a=>s.toggleVisibility(!!a),children:s.id},s.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(z,{children:[e.jsx(H,{children:l.getHeaderGroups().map(s=>e.jsx(g,{children:s.headers.map(a=>e.jsx(K,{children:a.isPlaceholder?null:x(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(U,{children:(u=l.getRowModel().rows)!=null&&u.length?l.getRowModel().rows.map(s=>e.jsx(g,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(a=>e.jsx(p,{children:x(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(g,{children:e.jsx(p,{colSpan:h.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[l.getFilteredSelectedRowModel().rows.length," of"," ",r.total," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"})]})]})]})}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsx(G,{children:e.jsxs(Q,{children:[e.jsx(W,{asChild:!0,children:e.jsxs(t,{size:"md",className:"rounded-full h-14 w-14 shadow-lg hover:shadow-xl transition-shadow",onClick:()=>c.get(route("user.create")),children:[e.jsx(ne,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Add User"})]})}),e.jsx(X,{children:e.jsx("p",{children:"Add User"})})]})})})]})]})}export{we as default};
