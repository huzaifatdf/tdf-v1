import{q as A,r as i,m as r,j as e,$ as F}from"./app-5UKiW8Lt.js";import{A as I,E as V}from"./AuthenticatedLayout-DNOoYXEO.js";import{u as z,f as p,g as E,a as H,b as K,c as _}from"./index-BrJphekJ.js";import{I as L,D as j,a as C,B as l,b as f,c as B,T as O,d as $,e as q,f as U,g as G,h as g}from"./breadcrumb-D7m_4CYk.js";import{C as w}from"./checkbox-D-DFoWdf.js";import{T as J,a as Q,b as h,c as W,d as X,e as S}from"./table-CGZX_37c.js";import{D as Y,a as Z,b as ee,c as se,d as ae,e as te,f as le}from"./dialog-DDkcwLZL.js";import{C as ie}from"./chevron-down-DxHvKUaF.js";import{P as oe}from"./plus-DL6xukw3.js";import{A as ne}from"./arrow-up-down-KFRj09kR.js";import"./toast-BuZKHEab.js";import"./index-g2Vt9Ges.js";import"./toaster-Cw8H9nOr.js";import"./index-CO2rl6Ku.js";function ve(){var u,x;const{cases:o,filters:v,sort:b}=A().props,[n,N]=i.useState(b||[]),[c,D]=i.useState(v||[]),[y,R]=i.useState({}),[P,T]=i.useState({}),[d,M]=i.useState({pageIndex:o.current_page-1,pageSize:o.per_page}),m=[{id:"select",header:({table:s})=>e.jsx(w,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:s})=>e.jsx(w,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:"S.No",cell:({row:s})=>e.jsx("div",{children:s.index+1})},{accessorKey:"title",header:"Title",cell:({row:s})=>e.jsx("div",{children:s.getValue("title")})},{accessorKey:"slug",header:({column:s})=>e.jsxs(l,{variant:"slug",onClick:()=>s.toggleSorting(s.getIsSorted()==="slug"),children:["Slug",e.jsx(ne,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("slug")})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx("div",{children:s.getValue("status")})},{accessorKey:"created_at",header:"Created At",cell:({row:s})=>new Date(s.getValue("created_at")).toLocaleDateString()},{id:"actions",enableHiding:!1,cell:({row:s})=>{const a=s.original;return e.jsxs(j,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(l,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(V,{className:"h-4 w-4"})]})}),e.jsxs(f,{align:"end",children:[e.jsx(G,{children:"Actions"}),e.jsx(g,{onClick:()=>r.get(route("case.edit",a.id)),className:"cursor-pointer",children:"Edit case"}),e.jsx(g,{onClick:()=>r.get(route("case.duplicate",a.id)),className:"cursor-pointer",children:"Duplicate case"}),e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(g,{className:"cursor-pointer",onSelect:k=>k.preventDefault(),children:"Delete case"})}),e.jsxs(ee,{className:"sm:max-w-[425px]",children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Delete case"}),e.jsx(te,{children:"Are you sure you want to delete this case? This action cannot be undone."})]}),e.jsx("div",{className:"grid gap-4 py-4"}),e.jsx(le,{children:e.jsx(l,{variant:"destructive",onClick:()=>{r.delete(route("case.destroy",a.id))},children:"Confirm Delete"})})]})]})]})]})}}];i.useEffect(()=>{const s={};c.length>0&&(s.filters=Object.fromEntries(c.map(a=>[a.id,a.value]))),n.length>0&&(s.sort={key:n[0].id,order:n[0].desc?"desc":"asc"}),s.page=d.pageIndex+1,s.perPage=d.pageSize,r.get(route("case.index"),s,{preserveState:!0,replace:!0})},[c,n,d]);const t=z({data:o.data,columns:m,pageCount:o.last_page,state:{sorting:n,columnFilters:c,columnVisibility:y,rowSelection:P,pagination:d},onSortingChange:N,onColumnFiltersChange:D,onColumnVisibilityChange:R,onRowSelectionChange:T,onPaginationChange:M,getCoreRowModel:_(),getPaginationRowModel:K(),getSortedRowModel:H(),getFilteredRowModel:E(),manualPagination:!0,manualSorting:!0,manualFiltering:!0});return e.jsxs(I,{children:[e.jsx(F,{title:"cases"}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4",children:[e.jsx(L,{placeholder:"Filter title...",value:((u=t.getColumn("title"))==null?void 0:u.getFilterValue())??"",onChange:s=>{var a;return(a=t.getColumn("title"))==null?void 0:a.setFilterValue(s.target.value)},className:"max-w-sm"}),e.jsxs(j,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"ml-auto",children:["Columns ",e.jsx(ie,{className:"ml-2 h-4 w-4"})]})}),e.jsx(f,{align:"end",children:t.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(B,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:a=>s.toggleVisibility(!!a),children:s.id},s.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(J,{children:[e.jsx(Q,{children:t.getHeaderGroups().map(s=>e.jsx(h,{children:s.headers.map(a=>e.jsx(W,{children:a.isPlaceholder?null:p(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(X,{children:(x=t.getRowModel().rows)!=null&&x.length?t.getRowModel().rows.map(s=>e.jsx(h,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(a=>e.jsx(S,{children:p(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(h,{children:e.jsx(S,{colSpan:m.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[t.getFilteredSelectedRowModel().rows.length," of"," ",o.total," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:"Previous"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:"Next"})]})]})]})}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsx(O,{children:e.jsxs($,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(l,{size:"md",className:"rounded-full h-14 w-14 shadow-lg hover:shadow-xl transition-shadow",onClick:()=>r.get(route("case.create")),children:[e.jsx(oe,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Add Case"})]})}),e.jsx(U,{children:e.jsx("p",{children:"Add Case"})})]})})})]})]})}export{ve as default};
