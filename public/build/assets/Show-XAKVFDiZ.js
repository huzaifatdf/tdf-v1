import{J as V,r as k,j as e,Q as q,S as A}from"./app-y7VUbBk5.js";import{A as z,U as G}from"./AuthenticatedLayout-kjBJHv3-.js";import{B as l,S as m}from"./breadcrumb-Du65Yj5j.js";import{B as o}from"./badge-CplnmAD8.js";import{C as x,a as h,b as p,d as H,c as j}from"./card-CbeJa7cX.js";import{D,a as E,b as F,c as _,d as I,e as T,f as B}from"./dialog-DVGHGj2T.js";import{S as J,a as O,b as P,c as Q,d as u}from"./select-DAbaMIfx.js";import{A as K,a as Y}from"./alert-BDjpEkfb.js";import{A as W}from"./arrow-left-CXZJBFQc.js";import{D as X}from"./download-B4PRFQgk.js";import{f as g}from"./toast-DNYpLter.js";import{A as Z}from"./archive-CeiiQ-ou.js";import{G as ee}from"./globe-UgtaPSMz.js";import{F as se}from"./file-text-D7IrQvfX.js";import{E as ae}from"./eye-DiDsvBPa.js";import"./toaster-OpQ18x-T.js";import"./index-CvODaNJL.js";import"./index-D2qXuvDG.js";import"./chevron-down-BkouZz1p.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],re=g("calendar",te);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ne=g("monitor",ie);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],le=g("rotate-ccw",ce);function De(){var v,w,S;const{submission:t,form:r,formFields:f,slug:d}=V().props,[N,y]=k.useState(!1),[b,L]=k.useState("csv"),M=()=>{A.post(route("form.submission.archive",[d,t.id]),{},{onSuccess:()=>{}})},$=()=>{y(!0);const a=document.createElement("form");a.method="POST",a.action=route("form.submission.export",d);const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),i=document.createElement("input");i.type="hidden",i.name="_token",i.value=s,a.appendChild(i);const n=document.createElement("input");n.type="hidden",n.name="submission_id",n.value=t.id,a.appendChild(n);const c=document.createElement("input");c.type="hidden",c.name="format",c.value=b,a.appendChild(c),document.body.appendChild(a),a.submit(),document.body.removeChild(a),setTimeout(()=>y(!1),2e3)},R=(a,s)=>{var i;if(!s&&s!==0&&a.type!=="checkbox")return e.jsx("span",{className:"text-gray-400 italic",children:"No data"});switch(a.type){case"file":return typeof s=="object"&&s.original_name?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:s.original_name}),e.jsxs(o,{variant:"outline",className:"text-xs",children:[(s.size/1024).toFixed(1)," KB"]}),s.path&&e.jsxs(l,{variant:"link",size:"sm",onClick:()=>window.open(`/storage/${s.path}`,"_blank"),className:"p-0 h-auto",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"View"]})]}):e.jsx("span",{className:"text-gray-400 italic",children:"No file uploaded"});case"checkbox":return Array.isArray(s)&&s.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.map((n,c)=>{var C;return e.jsx(o,{variant:"secondary",className:"text-xs",children:((C=a.options)==null?void 0:C[n])||n},c)})}):s===!0||s==="1"||s===1?e.jsx(o,{variant:"secondary",children:"Yes"}):e.jsx(o,{variant:"outline",children:"No"});case"select":case"radio":return((i=a.options)==null?void 0:i[s])||s;case"textarea":return e.jsx("div",{className:"whitespace-pre-wrap bg-gray-50 p-3 rounded-md border",children:s});case"email":return e.jsx("a",{href:`mailto:${s}`,className:"text-blue-600 hover:underline",children:s});case"url":return e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:s});case"date":return new Date(s).toLocaleDateString();default:return s}},U=a=>{switch(a){case"new":return"bg-blue-100 text-blue-800";case"read":return"bg-green-100 text-green-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(z,{children:[e.jsx(q,{title:`Submission #${t.id} - ${r.name}`}),e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(l,{variant:"outline",onClick:()=>A.get(route("form.submission.index",d)),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Back to Submissions"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Submission #",t.id]}),e.jsx("p",{className:"text-gray-600",children:r.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:U(t.status),children:((w=(v=t.status)==null?void 0:v.charAt(0))==null?void 0:w.toUpperCase())+((S=t.status)==null?void 0:S.slice(1))}),e.jsxs(D,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Export"]})}),e.jsxs(F,{className:"sm:max-w-[425px]",children:[e.jsxs(_,{children:[e.jsx(I,{children:"Export Submission"}),e.jsx(T,{children:"Choose the format for exporting this submission."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Format"}),e.jsxs(J,{value:b,onValueChange:L,children:[e.jsx(O,{children:e.jsx(P,{})}),e.jsxs(Q,{children:[e.jsx(u,{value:"csv",children:"CSV"}),e.jsx(u,{value:"json",children:"JSON"}),e.jsx(u,{value:"excel",children:"Excel"})]})]})]})}),e.jsx(B,{children:e.jsx(l,{onClick:$,disabled:N,children:N?"Exporting...":"Export"})})]})]}),e.jsxs(D,{children:[e.jsx(E,{asChild:!0,children:e.jsx(l,{variant:t.status==="archived"?"default":"destructive",children:t.status==="archived"?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Restore"]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Archive"]})})}),e.jsxs(F,{className:"sm:max-w-[425px]",children:[e.jsxs(_,{children:[e.jsxs(I,{children:[t.status==="archived"?"Restore":"Archive"," Submission"]}),e.jsx(T,{children:t.status==="archived"?"Are you sure you want to restore this submission?":"Are you sure you want to archive this submission? This action can be undone later."})]}),e.jsx(B,{children:e.jsx(l,{variant:t.status==="archived"?"default":"destructive",onClick:M,children:t.status==="archived"?"Confirm Restore":"Confirm Archive"})})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Submission Data"}),e.jsx(H,{children:"Form responses and uploaded files"})]}),e.jsxs(j,{className:"space-y-4",children:[f.map(a=>{var s;return e.jsx("div",{className:"border-b pb-4 last:border-b-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[a.label,a.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.type," field"]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("div",{className:"text-sm",children:R(a,(s=t.data)==null?void 0:s[a.name])})})]})},a.id)}),f.length===0&&e.jsx(K,{children:e.jsx(Y,{children:"No form fields configured for this form."})})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(p,{className:"text-base",children:"Submission Details"})}),e.jsxs(j,{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Submitted"}),e.jsx("p",{className:"text-gray-600",children:new Date(t.created_at).toLocaleString()})]})]}),e.jsx(m,{}),t.user&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Submitted by"}),e.jsx("p",{className:"text-gray-600",children:t.user.name}),e.jsx("p",{className:"text-gray-500 text-xs",children:t.user.email})]})]}),e.jsx(m,{})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"IP Address"}),e.jsx("p",{className:"text-gray-600 font-mono text-xs",children:t.ip_address||"Unknown"})]})]}),t.user_agent&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"User Agent"}),e.jsx("p",{className:"text-gray-600 text-xs break-all",children:t.user_agent})]})]})]})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(p,{className:"text-base",children:"Form Information"})}),e.jsxs(j,{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name}),r.description&&e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:r.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Form ID:"}),e.jsx("span",{className:"font-mono text-xs",children:r.id})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Slug:"}),e.jsx("span",{className:"font-mono text-xs",children:r.slug})]})]})]})]})]})]})]})}export{De as default};
