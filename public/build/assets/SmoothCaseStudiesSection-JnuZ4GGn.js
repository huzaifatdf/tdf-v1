import{J as S,r as a,d as w,j as t,t as R}from"./app-CVPDb5BZ.js";import{g as b,S as E}from"./WebsiteLayout-CPU21nUh.js";import"./toaster-D7lXXl2u.js";import"./toast-CJEGUl4O.js";import"./index-DOOiEreX.js";function I(l){return Object.keys(l).map(m=>({key:m.replace(/_\d+$/,""),value:l[m]}))}function O(){const{appUrl:l}=S().props,[m,h]=a.useState([]),[i,x]=a.useState(null),g=a.useRef(null),u=a.useRef({}),f=a.useRef(null),p=a.useRef({}),[c,N]=a.useState([]);a.useEffect(()=>{w.get("/api/v1/case").then(e=>{const s=e.data;console.log(s),h(s);const r=s.map((n,o)=>{const v=JSON.parse(n.data),d=I(v.Service);return{id:String(o+1).padStart(2,"0"),title:n.title,slug:n.slug,subtitle:n.description.length>10?n.description.split(" ").slice(0,10).join(" ")+"...":n.description,mainImage:n.image?`${l}/${n.image}`:"/images/case4.png",features:d.length>0?d.map(j=>{if(j.key==="title")return j.value}).filter(Boolean):[]}});N(r),x(r.length>0?r[0].id:null)}).catch(e=>{console.error("Error fetching case studies:",e)})},[l]),a.useEffect(()=>{if(!i||!f.current||!p.current[i])return;const e=f.current,s=p.current[i];e.getBoundingClientRect();const r=s.getBoundingClientRect(),n=e.clientHeight,o=r.height,d=s.offsetTop-n/2+o/2;e.scrollTo({top:d,behavior:"smooth"})},[i]),a.useEffect(()=>{if(c.length===0)return;const e=[];return c.forEach(s=>{const r=new IntersectionObserver(([o])=>{o.isIntersecting&&x(s.id)},{threshold:.6,rootMargin:"-20% 0px -20% 0px"}),n=u.current[s.id];n&&(r.observe(n),e.push(r))}),()=>{e.forEach(s=>s.disconnect())}},[c]),a.useEffect(()=>{if(c.length===0)return;const e=g.current;e&&(b.registerPlugin(E),b.from(e,{y:50,opacity:0,duration:1,scrollTrigger:{trigger:e,start:"top 80%",end:"bottom center",toggleActions:"play none none reverse"}}))},[c]);const y=e=>{const s=u.current[e];s&&s.scrollIntoView({behavior:"smooth",block:"center"})};return c.find(e=>e.id===i),c.length===0?t.jsx("div",{className:"container-fluid min-h-screen flex items-center justify-center",children:t.jsx("p",{children:"Loading case studies..."})}):t.jsx("section",{ref:g,className:"container-fluid min-h-screen mobile-screens",children:t.jsxs("div",{className:"flex sec-padding pt-0 pb-0",children:[t.jsx("div",{className:"w-1/2 sticky top-0 h-screen flex flex-col justify-center",children:t.jsx("div",{className:"max-w-lg",children:t.jsx("nav",{ref:f,className:"space-y-8 pl-6 h-[550px] overflow-y-auto custom-scrollbar custom-mobile-height",style:{direction:"rtl"},children:c.map(e=>t.jsxs("div",{ref:s=>p.current[e.id]=s,className:"relative group",style:{direction:"ltr"},children:[t.jsxs("button",{onClick:()=>y(e.id),className:`text-left w-full transition-all duration-500 ${i===e.id?"opacity-100":"hover:opacity-70"}`,children:[t.jsx("h5",{className:`text-[18px] mb-0 transition-all duration-500 ${i===e.id?"fc-purple":"fc-white"}`,children:e.id}),t.jsx("h3",{className:`text-[20px] transition-all duration-500 ${i===e.id?"fc-secondary":"fc-white"}`,children:e.title})]}),i===e.id&&t.jsx("div",{className:"absolute bottom-0 left-0 h-1 w-10 bg-[#9BE500] transition-all duration-500"})]},e.id))})})}),t.jsx("div",{className:"w-1/2",children:c.map(e=>t.jsx("div",{ref:s=>u.current[e.id]=s,className:"min-h-screen flex items-center",children:t.jsxs("div",{className:"animate-fadeIn",children:[t.jsx("img",{src:e.mainImage,alt:`${e.title} main image`,className:"w-full h-auto mb-6"}),t.jsx("h2",{className:"text-[26px] fc-secondary mb-2",children:e.title}),t.jsx("p",{className:"text-[20px] fc-primary mb-3 leading-relaxed",children:e.subtitle}),t.jsx("div",{className:"mb-10",children:e.features.map((s,r)=>r>=3?r===3?t.jsx("div",{className:"flex items-start",children:t.jsx("span",{className:"fc-primary text-[18px] leading-relaxed mt-2",children:"and more..."})},r):null:t.jsx("div",{className:"flex items-start",children:t.jsx("span",{className:"fc-primary text-[18px] leading-relaxed",children:s})},r))}),t.jsxs(R,{className:"group flex items-center gap-2 bg-transparent border-none fc-primary transition-colors duration-300 text-lg font-medium cursor-pointer",href:route("casestudy.show",e.slug),onBefore:()=>window.scrollTo(0,0),children:["Read more ",t.jsx("span",{className:"fc-purple group-hover:translate-x-1 transition-transform",children:"â†’"})]}),t.jsx("hr",{className:"border-white mb-8"})]})},e.id))})]})})}export{O as default};
