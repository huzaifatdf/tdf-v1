import{r as i,q as y,R as g,d as S,j as t}from"./app-C0pdsdtr.js";import{g as v,S as _}from"./WebsiteLayout-MmexyAee.js";import{p as w}from"./index-BVrNIbO1.js";import"./toaster-Cxy0KhyD.js";import"./toast-Bwq_XAdB.js";import"./index-DUXC4bOe.js";function E(c){return Object.keys(c).map(f=>({key:f.replace(/_\d+$/,""),value:c[f]}))}function C(){const[c,f]=i.useState("text-to-text"),h=i.useRef(null),m=i.useRef({}),d=i.useRef(null),u=i.useRef({}),{appUrl:p}=y().props,[o,j]=g.useState([]);g.useEffect(()=>{S.get("/api/v1/services").then(e=>{console.log(e.data),j(e.data),e.data.length>0&&f(e.data[0].section_no)}).catch(e=>{console.error(e)})},[]),i.useEffect(()=>{if(!c||!d.current||!u.current[c])return;const e=d.current,s=u.current[c],n=e.clientHeight,a=s.offsetHeight,l=s.offsetTop-n/2+a/2;e.scrollTo({top:l,behavior:"smooth"})},[c]),i.useEffect(()=>{const e=document.querySelector(".container-fluid"),s=()=>{const n=e.scrollTop;let a=o.length>0?o[0].section_no:"01";o.forEach(r=>{const l=m.current[r.section_no];if(l){const{offsetTop:x,offsetHeight:b}=l;n>=x-100&&n<x+b-100&&(a=r.section_no)}}),f(a)};if(e)return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)},[o]),i.useEffect(()=>{if(o.length===0)return;const e=[];return o.forEach(s=>{const n=new IntersectionObserver(([r])=>{r.isIntersecting&&f(s.section_no)},{threshold:.1,rootMargin:"-20% 0px -20% 0px"}),a=m.current[s.section_no];a&&(n.observe(a),e.push(n))}),()=>{e.forEach(s=>s.disconnect())}},[o]),i.useEffect(()=>{if(o.length===0)return;const e=h.current;e&&(v.registerPlugin(_),v.from(e,{y:50,opacity:0,duration:1,scrollTrigger:{trigger:e,start:"top 80%",end:"bottom center",toggleActions:"play none none reverse"}}))},[o]);const N=e=>{const s=m.current[e];s&&s.scrollIntoView({behavior:"smooth",block:"start"})};return o.find(e=>e.section_no===c),t.jsx(t.Fragment,{children:t.jsx("section",{ref:h,className:"container-fluid min-h-screen mobile-screens",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"w-1/2 sticky top-0 h-screen flex flex-col justify-center",children:t.jsx("div",{className:"max-w-lg",children:t.jsx("nav",{ref:d,className:"space-y-8 pl-6 h-[550px] overflow-y-auto custom-scrollbar custom-mobile-height",style:{direction:"rtl"},children:o.map((e,s)=>t.jsxs("div",{ref:n=>u.current[e.section_no]=n,className:"relative group",children:[t.jsxs("button",{onClick:()=>N(e.section_no),className:`text-left w-full transition-all duration-500 ${c===e.section_no?"opacity-100":"hover:opacity-70"}`,children:[t.jsx("h5",{className:`text-[18px] mb-0 transition-all duration-500 ${c===e.section_no?"fc-purple":"fc-white"}`,children:e.section_no}),t.jsx("h3",{className:`text-[20px] transition-all duration-500 fc-secondary ${c===e.section_no?"fc-secondary":"fc-white"}`,children:e.title})]}),c===e.section_no&&t.jsx("div",{className:"absolute bottom-0 left-0 h-1 w-10 bg-[#9BE500] transition-all duration-500"})]},e.id))})})}),t.jsx("div",{className:"w-1/2",children:o.map((e,s)=>{const n=(e==null?void 0:e.data)&&JSON.parse(e==null?void 0:e.data);let a=[];if(n&&n.techstack)try{const r=n.techstack;a=E(r)}catch(r){console.error("Failed to parse techstack JSON:",r)}return console.log("Titles:",a),t.jsx("div",{ref:r=>m.current[e.section_no]=r,className:"min-h-screen flex items-center py-20",children:t.jsx("div",{className:"",children:t.jsxs("div",{className:"animate-fadeIn",children:[t.jsx("img",{src:`${p}/${e.thumbnail}`,alt:`${e.title} main image`,className:"w-full h-auto mb-6"}),t.jsx("h2",{className:"text-[26px] text-white mb-2",children:e.title}),t.jsx("p",{className:"text-[18px] fc-primary leading-relaxed",children:w(e.description)}),a.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-[26px] text-white mt-5 mb-5",children:"Technology Stack"}),t.jsx("div",{className:"tech-logo grid grid-cols-4 gap-10 mt-4 align-items-center",children:a.map((r,l)=>t.jsx("img",{src:`${p}/${r.value}`,className:"",alt:`Tech logo ${l}`},l))})]}),t.jsx("hr",{className:"border-white mb-8"})]})})},e.section_no)})})]})})})}export{C as default};
