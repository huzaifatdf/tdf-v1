import{q as _,r as o,m as k,j as e,$ as A}from"./app-CoT-G8KS.js";import{A as R}from"./AuthenticatedLayout-B9GhmLNt.js";import{I as x,B as u,X as E,C as z}from"./toast-bkwqgRad.js";import{T as $}from"./textarea-DVMKUYK7.js";import{S as B,a as J,b as W,c as X,d as M}from"./select-DBt-HpNw.js";import{c as G,a as H,b as g,F as Q,d as Y,e as j,E as b}from"./index.esm-CCs0Qx7n.js";import I from"./Model-CpClDBL1.js";import{S as Z}from"./SummernoteInput-L20nierI.js";import{C as V}from"./chevron-down-Wqf75c8g.js";import"./createLucideIcon-miy0g9Vb.js";import"./index-Bgb9EwZj.js";import"./index-BBmPoxIL.js";import"./alert-CZMJzTqe.js";import"./Modal-CgioBOqU.js";import"./transition-sgYrhTqU.js";import"./search-DytLK8Hg.js";import"./trash-2-BDRscaHG.js";import"./video-C7DLBfwC.js";import"./upload-B4Hv41P3.js";import"./download-Co4-siE8.js";import"./eye-DP_PMf-N.js";function fe(){const{industry:l,additionalDataStructure:m,appUrl:y}=_().props,[h,f]=o.useState(y+"/"+l.image||null),[p,N]=o.useState(y+"/"+l.thumbnail||null),[v,L]=o.useState({Detail:!1,"Our Work":!1,Problem:!1,"problem Solutions":!1,seo:!1}),O=G({title:g().required("Title is required").min(2,"Title must be at least 2 characters").max(255,"Title must not exceed 255 characters"),slug:g().required("Slug is required").matches(/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"),description:g().required("Description is required").min(10,"Description must be at least 10 characters"),status:g().required("Status is required").oneOf(["published","draft"],"Invalid status"),priority:H().required("Priority is required").min(0,"Priority must be at least 0").max(100,"Priority must not exceed 100")}),P=o.useCallback((s,{setSubmitting:r})=>{const a=new FormData;["title","slug","description","status","priority"].forEach(t=>{a.append(t,s[t])}),a.append("image",s.image),a.append("thumbnail",s.thumbnail);const i={};Object.keys(m).forEach(t=>{i[t]={},Object.keys(m[t]).forEach(c=>{const d=`${t}_${c}`;s[d]!==void 0&&s[d]!==""&&(i[t][c]=s[d])}),Object.keys(i[t]).length===0&&delete i[t]}),Object.keys(i).length>0&&a.append("additional_data",JSON.stringify(i)),a.append("_method","PUT"),k.post(route("industry.update",l.id),a,{forceFormData:!0,onSuccess:()=>r(!1),onError:()=>r(!1)})},[l.id,m]),w=o.useCallback((s,r,a)=>{s(r,null),a(null)},[]),T=o.useCallback(s=>{L(r=>({...r,[s]:!r[s]}))},[]),q=o.useCallback((s,r,a,n,i)=>{const t=`${s}_${r}`,c=n[t]||"";switch(a.type){case"summernote":return e.jsx(Z,{value:c,onChange:d=>i(t,d),placeholder:`Enter ${a.label.toLowerCase()}`,height:200,showToggle:!0,defaultMode:"simple"});case"textarea":return e.jsx($,{id:t,name:t,value:c,onChange:d=>i(t,d.target.value),placeholder:`Enter ${a.label.toLowerCase()}`,rows:3});case"number":return e.jsx(x,{id:t,name:t,type:"number",value:c,onChange:d=>i(t,d.target.value),placeholder:`Enter ${a.label.toLowerCase()}`,step:"0.01"});default:return e.jsx(x,{id:t,name:t,type:"text",value:c,onChange:d=>i(t,d.target.value),placeholder:`Enter ${a.label.toLowerCase()}`})}},[]),D=o.useCallback(()=>{const s={title:l.title||"",slug:l.slug||"",description:l.description||"",image:l.image||null,thumbnail:l.thumbnail||null,status:l.status||"",priority:l.priority||0},r=l.data?JSON.parse(l.data):{};return Object.keys(m).forEach(a=>{Object.keys(m[a]).forEach(n=>{var t;const i=`${a}_${n}`;s[i]=((t=r[a])==null?void 0:t[n])||""})}),s},[l,m]),[F,S]=o.useState(!1),[U,C]=o.useState(!1);return e.jsxs(R,{children:[e.jsx(A,{title:`Edit industry - ${l.title}`}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsx("div",{className:"w-full",children:e.jsx(Q,{initialValues:D(),validationSchema:O,onSubmit:P,children:({isSubmitting:s,setFieldValue:r,values:a})=>e.jsxs(Y,{className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit industry"}),e.jsx("p",{className:"text-gray-600",children:"Update industry information"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"industry Title *"}),e.jsx(j,{as:x,id:"title",name:"title",placeholder:"Enter industry title"}),e.jsx(b,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"slug",className:"text-sm font-medium",children:"industry Slug *"}),e.jsx(j,{as:x,id:"slug",name:"slug",placeholder:"Enter industry slug"}),e.jsx(b,{name:"slug",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description *"}),e.jsx(j,{as:$,id:"description",name:"description",placeholder:"Enter industry description",rows:4}),e.jsx(b,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),e.jsxs(B,{name:"status",value:a.status,onValueChange:n=>r("status",n),children:[e.jsx(J,{children:e.jsx(W,{placeholder:"Select status"})}),e.jsxs(X,{children:[e.jsx(M,{value:"published",children:"Published"}),e.jsx(M,{value:"draft",children:"Draft"})]})]}),e.jsx(b,{name:"status",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"priority",className:"text-sm font-medium",children:"Priority (0-100) *"}),e.jsx(j,{as:x,id:"priority",name:"priority",type:"number",min:"0",max:"100",placeholder:"0"}),e.jsx(b,{name:"priority",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"industry Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>S(!0),className:"w-full",children:h?"Change Media":"Add Media"}),e.jsx(I,{routename:route("industry.edit",l.id),showModal:F,setShowModal:S,setFieldValue:r,fieldName:"image",setImagePreview:f}),h&&e.jsxs("div",{className:"relative mt-4 inline-block",children:[e.jsx("img",{src:typeof h=="string"?h:URL.createObjectURL(h),alt:"industry Preview",className:"w-24 h-24 object-cover rounded-lg"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:()=>w(r,"image",f),children:e.jsx(E,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-sm font-medium",children:"Thumbnail Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>C(!0),className:"w-full",children:p?"Change Media":"Add Media"}),e.jsx(I,{routename:route("industry.edit",l.id),showModal:U,setShowModal:C,setFieldValue:r,fieldName:"thumbnail",setImagePreview:N}),p&&e.jsxs("div",{className:"relative mt-4 inline-block",children:[e.jsx("img",{src:typeof p=="string"?p:URL.createObjectURL(p),alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:()=>w(r,"thumbnail",N),children:e.jsx(E,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Additional Information"}),Object.keys(m).map(n=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("button",{type:"button",className:"w-full px-4 py-3 text-left flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",onClick:()=>T(n),children:[e.jsx("span",{className:"font-medium capitalize",children:n.replace("_"," ")}),v[n]?e.jsx(V,{className:"h-4 w-4 transition-transform"}):e.jsx(z,{className:"h-4 w-4 transition-transform"})]}),v[n]&&e.jsx("div",{className:"p-4 space-y-4 border-t bg-white",children:Object.keys(m[n]).map(i=>{const t=m[n][i],c=`${n}_${i}`;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:c,className:"text-sm font-medium text-gray-700",children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),q(n,i,t,a,r)]},i)})})]},n))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>k.get(route("industry.index")),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:s,children:s?"Updating...":"Update industry"})]})]})})})})})]})}export{fe as default};
