import{r as x,j as a,q as se,v as te,$ as oe,m as G,R as ne}from"./app-BWnSHApj.js";import{A as ce}from"./AuthenticatedLayout-a-TlR1DS.js";import{i as $,u as ie,R as de,j as le,k as me,l as ue,B as C,I as N}from"./breadcrumb-BxvG1H7V.js";import{L as w}from"./label-eJvYPSyV.js";import{T as pe}from"./textarea-B8kctZG5.js";import{S as he,a as xe,b as je,c as ve,d as be}from"./select-CljcOzDl.js";import{C as F}from"./checkbox-Q748TT64.js";import{u as ge,c as L,P as S,a as E,b as I,d as Re,e as O,X as fe}from"./toast-DPrTQjTc.js";import{u as ye}from"./index-DuLUdOjo.js";import{C as Ne,a as Ce,b as we,d as Se,c as _e}from"./card-Bppe1KfN.js";import{A as ke,a as Ae}from"./alert-CNKBWPfT.js";import{A as Ie}from"./arrow-left-DZOKKRVS.js";import{U as Ee}from"./upload-C8JcTHXS.js";import"./toaster-DfshAmon.js";import"./index-CHLwRQbz.js";import"./chevron-down-B-jqin5j.js";var q="Radio",[qe,B]=L(q),[Pe,De]=qe(q),M=x.forwardRef((i,m)=>{const{__scopeRadio:s,name:d,checked:o=!1,required:l,disabled:u,value:n="on",onCheck:c,form:R,...b}=i,[j,f]=x.useState(null),h=E(m,t=>f(t)),v=x.useRef(!1),e=j?R||!!j.closest("form"):!0;return a.jsxs(Pe,{scope:s,checked:o,disabled:u,children:[a.jsx(S.button,{type:"button",role:"radio","aria-checked":o,"data-state":K(o),"data-disabled":u?"":void 0,disabled:u,value:n,...b,ref:h,onClick:I(i.onClick,t=>{o||c==null||c(),e&&(v.current=t.isPropagationStopped(),v.current||t.stopPropagation())})}),e&&a.jsx(U,{control:j,bubbles:!v.current,name:d,value:n,checked:o,required:l,disabled:u,form:R,style:{transform:"translateX(-100%)"}})]})});M.displayName=q;var T="RadioIndicator",V=x.forwardRef((i,m)=>{const{__scopeRadio:s,forceMount:d,...o}=i,l=De(T,s);return a.jsx(Re,{present:d||l.checked,children:a.jsx(S.span,{"data-state":K(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:m})})});V.displayName=T;var Ge="RadioBubbleInput",U=x.forwardRef(({__scopeRadio:i,control:m,checked:s,bubbles:d=!0,...o},l)=>{const u=x.useRef(null),n=E(u,l),c=ye(s),R=me(m);return x.useEffect(()=>{const b=u.current;if(!b)return;const j=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(j,"checked").set;if(c!==s&&h){const v=new Event("click",{bubbles:d});h.call(b,s),b.dispatchEvent(v)}},[c,s,d]),a.jsx(S.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:n,style:{...o.style,...R,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});U.displayName=Ge;function K(i){return i?"checked":"unchecked"}var Fe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_="RadioGroup",[$e,ta]=L(_,[$,B]),z=$(),H=B(),[Le,Oe]=$e(_),W=x.forwardRef((i,m)=>{const{__scopeRadioGroup:s,name:d,defaultValue:o,value:l,required:u=!1,disabled:n=!1,orientation:c,dir:R,loop:b=!0,onValueChange:j,...f}=i,h=z(s),v=ie(R),[e,t]=ge({prop:l,defaultProp:o??null,onChange:j,caller:_});return a.jsx(Le,{scope:s,name:d,required:u,disabled:n,value:e,onValueChange:t,children:a.jsx(de,{asChild:!0,...h,orientation:c,dir:v,loop:b,children:a.jsx(S.div,{role:"radiogroup","aria-required":u,"aria-orientation":c,"data-disabled":n?"":void 0,dir:v,...f,ref:m})})})});W.displayName=_;var X="RadioGroupItem",Y=x.forwardRef((i,m)=>{const{__scopeRadioGroup:s,disabled:d,...o}=i,l=Oe(X,s),u=l.disabled||d,n=z(s),c=H(s),R=x.useRef(null),b=E(m,R),j=l.value===o.value,f=x.useRef(!1);return x.useEffect(()=>{const h=e=>{Fe.includes(e.key)&&(f.current=!0)},v=()=>f.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",v)}},[]),a.jsx(le,{asChild:!0,...n,focusable:!u,active:j,children:a.jsx(M,{disabled:u,required:l.required,checked:j,...c,...o,name:l.name,ref:b,onCheck:()=>l.onValueChange(o.value),onKeyDown:I(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:I(o.onFocus,()=>{var h;f.current&&((h=R.current)==null||h.click())})})})});Y.displayName=X;var Be="RadioGroupIndicator",J=x.forwardRef((i,m)=>{const{__scopeRadioGroup:s,...d}=i,o=H(s);return a.jsx(V,{...o,...d,ref:m})});J.displayName=Be;var Q=W,Z=Y,Me=J;const ee=x.forwardRef(({className:i,...m},s)=>a.jsx(Q,{className:O("grid gap-2",i),...m,ref:s}));ee.displayName=Q.displayName;const ae=x.forwardRef(({className:i,...m},s)=>a.jsx(Z,{ref:s,className:O("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",i),...m,children:a.jsx(Me,{className:"flex items-center justify-center",children:a.jsx(ue,{className:"h-3.5 w-3.5 fill-primary"})})}));ae.displayName=Z.displayName;function oa(){const{form:i,fields:m,slug:s,errors:d}=se().props,[o,l]=x.useState({}),u={};m.forEach(e=>{e.type==="checkbox"&&e.options?u[e.name]=[]:e.default_value?u[e.name]=e.default_value:u[e.name]=""});const{data:n,setData:c,post:R,processing:b,errors:j,reset:f}=te(u),h=e=>{e.preventDefault();const t=new FormData;Object.keys(n).forEach(p=>{Array.isArray(n[p])?n[p].forEach(k=>{t.append(`${p}[]`,k)}):t.append(p,n[p]||"")}),Object.keys(o).forEach(p=>{o[p]&&t.append(p,o[p])}),R(route("form.submission.store",s),{data:t,forceFormData:!0,onSuccess:()=>{f(),l({})}})},v=e=>{var P;const t=`field-${e.name}`,p=j[e.name]||(d==null?void 0:d[e.name]),k=j[e.name]||(d==null?void 0:d[e.name]),y=r=>a.jsxs("div",{className:`space-y-2 ${e.width==="half"||e.width==="third"?"md:col-span-1":"md:col-span-2"}`,children:[a.jsxs(w,{htmlFor:t,className:"text-sm font-medium",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r,e.help_text&&a.jsx("p",{className:"text-xs text-gray-600",children:e.help_text}),p&&a.jsx("p",{className:"text-xs text-red-600",children:k})]});switch(e.type){case"text":case"email":case"url":case"tel":return y(a.jsx(N,{id:t,type:e.type,value:n[e.name]||"",onChange:r=>c(e.name,r.target.value),placeholder:e.placeholder,maxLength:e.max_length,minLength:e.min_length,required:e.required,className:p?"border-red-500":""}));case"number":return y(a.jsx(N,{id:t,type:"number",value:n[e.name]||"",onChange:r=>c(e.name,r.target.value),placeholder:e.placeholder,required:e.required,className:p?"border-red-500":""}));case"date":return y(a.jsx(N,{id:t,type:"date",value:n[e.name]||"",onChange:r=>c(e.name,r.target.value),required:e.required,className:p?"border-red-500":""}));case"textarea":return y(a.jsx(pe,{id:t,value:n[e.name]||"",onChange:r=>c(e.name,r.target.value),placeholder:e.placeholder,maxLength:e.max_length,minLength:e.min_length,required:e.required,rows:4,className:p?"border-red-500":""}));case"select":return y(a.jsxs(he,{value:n[e.name]||"",onValueChange:r=>c(e.name,r),required:e.required,children:[a.jsx(xe,{className:p?"border-red-500":"",children:a.jsx(je,{placeholder:e.placeholder||"Select an option"})}),a.jsx(ve,{children:e.options&&Object.entries(e.options).map(([r,g])=>a.jsx(be,{value:r,children:g},r))})]}));case"radio":return y(a.jsx(ee,{value:n[e.name]||"",onValueChange:r=>c(e.name,r),className:"flex flex-col space-y-2",children:e.options&&Object.entries(e.options).map(([r,g])=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ae,{value:r,id:`${t}-${r}`}),a.jsx(w,{htmlFor:`${t}-${r}`,className:"text-sm font-normal",children:g})]},r))}));case"checkbox":return e.options&&Object.keys(e.options).length>1?y(a.jsx("div",{className:"space-y-2",children:Object.entries(e.options).map(([r,g])=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(F,{id:`${t}-${r}`,checked:(n[e.name]||[]).includes(r),onCheckedChange:A=>{const D=n[e.name]||[];A?c(e.name,[...D,r]):c(e.name,D.filter(re=>re!==r))}}),a.jsx(w,{htmlFor:`${t}-${r}`,className:"text-sm font-normal",children:g})]},r))})):y(a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(F,{id:t,checked:!!n[e.name],onCheckedChange:r=>c(e.name,r)}),a.jsx(w,{htmlFor:t,className:"text-sm font-normal",children:e.placeholder||"Check this box"})]}));case"file":return y(a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(N,{id:t,type:"file",onChange:r=>{const g=r.target.files[0];g&&(l(A=>({...A,[e.name]:g})),c(e.name,g.name))},required:e.required,className:p?"border-red-500":"",accept:((P=e.options)==null?void 0:P.accept)||"*"}),a.jsx(Ee,{className:"h-4 w-4 text-gray-400"})]}),o[e.name]&&a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[a.jsx("span",{children:o[e.name].name}),a.jsx(C,{type:"button",variant:"ghost",size:"sm",onClick:()=>{l(r=>{const g={...r};return delete g[e.name],g}),c(e.name,""),document.getElementById(t).value=""},children:a.jsx(fe,{className:"h-3 w-3"})})]})]}));case"hidden":return a.jsx("input",{type:"hidden",name:e.name,value:n[e.name]||e.default_value||""});default:return y(a.jsx(N,{id:t,type:"text",value:n[e.name]||"",onChange:r=>c(e.name,r.target.value),placeholder:e.placeholder,required:e.required,className:p?"border-red-500":""}))}};return a.jsxs(ce,{children:[a.jsx(oe,{title:`Add Submission - ${i.name}`}),a.jsx("div",{className:"max-w-4xl mx-auto p-6",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center space-x-4 mb-4",children:a.jsxs(C,{variant:"outline",onClick:()=>G.get(route("dynamicform.submissions.index",s)),children:[a.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Back to Submissions"]})}),a.jsxs(Ne,{children:[a.jsxs(Ce,{children:[a.jsx(we,{children:i.name}),i.description&&a.jsx(Se,{children:i.description})]}),a.jsxs(_e,{children:[Object.keys(j).length>0&&a.jsx(ke,{className:"mb-6 border-red-200 bg-red-50",children:a.jsx(Ae,{className:"text-red-800",children:"Please correct the errors below and try again."})}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(e=>a.jsx(ne.Fragment,{children:v(e)},e.id))}),a.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[a.jsx(C,{type:"button",variant:"outline",onClick:()=>G.get(route("form.submissions.index",s)),children:"Cancel"}),a.jsx(C,{type:"submit",disabled:b,children:b?"Submitting...":i.submit_button_text||"Submit Form"})]})]})]})]})]})})]})}export{oa as default};
