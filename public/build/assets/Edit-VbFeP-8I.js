import{J as F,r as h,j as e,Q as _,S as C}from"./app-y7VUbBk5.js";import{A}from"./AuthenticatedLayout-kjBJHv3-.js";import{I as p,B as x,C as R}from"./breadcrumb-Du65Yj5j.js";import{T as z}from"./textarea-BkgsQ1Ji.js";import{S as J,a as B,b as Q,c as X,d as E}from"./select-DAbaMIfx.js";import{F as G,a as H,b as M,E as b}from"./formik.esm-BAeH8Zn5.js";import{c as W,a as Y,b as j}from"./index.esm-CVUZ1RhG.js";import $ from"./Model-Ct9JWlM8.js";import{S as Z}from"./SummernoteInput-CiLd7idL.js";import{X as k}from"./toast-DNYpLter.js";import{C as V}from"./chevron-down-BkouZz1p.js";import"./toaster-OpQ18x-T.js";import"./index-CvODaNJL.js";import"./index-D2qXuvDG.js";import"./alert-BDjpEkfb.js";import"./Modal-D6Vb2v_k.js";import"./transition-RfiugF8X.js";import"./search-DQ9210RP.js";import"./trash-2-CWgLTpPS.js";import"./video-DKKdAt_-.js";import"./upload-I4pjbQpB.js";import"./download-B4PRFQgk.js";import"./eye-DiDsvBPa.js";function ye(){const{service:n,additionalDataStructure:c,appUrl:g}=F().props,[m,f]=h.useState(g+"/"+n.image||null),[u,v]=h.useState(g+"/"+n.thumbnail||null),[N,I]=h.useState({specifications:!0,pricing:!0,inventory:!1,seo:!1}),T=W({title:j().required("Title is required").min(2,"Title must be at least 2 characters").max(255,"Title must not exceed 255 characters"),description:j().required("Description is required").min(10,"Description must be at least 10 characters"),status:j().required("Status is required").oneOf(["published","draft"],"Invalid status"),priority:Y().required("Priority is required").min(0,"Priority must be at least 0").max(100,"Priority must not exceed 100")}),L=(s,{setSubmitting:r})=>{const a=new FormData;["title","description","status","priority"].forEach(t=>{a.append(t,s[t])}),a.append("image",s.image),a.append("thumbnail",s.thumbnail);const l={};Object.keys(c).forEach(t=>{l[t]={},Object.keys(c[t]).forEach(d=>{const o=`${t}_${d}`;s[o]!==void 0&&s[o]!==""&&(l[t][d]=s[o])}),Object.keys(l[t]).length===0&&delete l[t]}),Object.keys(l).length>0&&a.append("additional_data",JSON.stringify(l)),a.append("_method","PUT"),C.post(route("service.update",n.id),a,{forceFormData:!0,onSuccess:()=>{r(!1)},onError:t=>{r(!1)}})},y=(s,r,a)=>{s(r,null),a(null)},O=s=>{I(r=>({...r,[s]:!r[s]}))},P=(s,r,a,i,l)=>{const t=`${s}_${r}`,d=i[t]||"";switch(a.type){case"textarea":return e.jsx(z,{id:t,name:t,value:d,onChange:o=>l(t,o.target.value),placeholder:`Enter ${a.label.toLowerCase()}`,rows:3});case"number":return e.jsx(p,{id:t,name:t,type:"number",value:d,onChange:o=>l(t,o.target.value),placeholder:`Enter ${a.label.toLowerCase()}`,step:"0.01"});default:return e.jsx(p,{id:t,name:t,type:"text",value:d,onChange:o=>l(t,o.target.value),placeholder:`Enter ${a.label.toLowerCase()}`})}},D=()=>{const s={title:n.title||"",description:n.description||"",image:n.image||null,thumbnail:n.thumbnail||null,status:n.status||"",priority:n.priority||0},r=n.data?JSON.parse(n.data):{};return Object.keys(c).forEach(a=>{Object.keys(c[a]).forEach(i=>{var t;const l=`${a}_${i}`;s[l]=((t=r[a])==null?void 0:t[i])||""})}),s},[q,w]=h.useState(!1),[U,S]=h.useState(!1);return e.jsxs(A,{children:[e.jsx(_,{title:`Edit service - ${n.title}`}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsx("div",{className:"w-full",children:e.jsx(G,{initialValues:D(),validationSchema:T,onSubmit:L,children:({isSubmitting:s,setFieldValue:r,values:a})=>e.jsxs(H,{className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit service"}),e.jsx("p",{className:"text-gray-600",children:"Update service information"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"service Title *"}),e.jsx(M,{as:p,id:"title",name:"title",placeholder:"Enter service title"}),e.jsx(b,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description *"}),e.jsx(Z,{value:a.description,onChange:i=>r("description",i),height:200,showToggle:!0,defaultMode:"simple"}),e.jsx(b,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),e.jsxs(J,{name:"status",value:a.status,onValueChange:i=>r("status",i),children:[e.jsx(B,{children:e.jsx(Q,{placeholder:"Select status"})}),e.jsxs(X,{children:[e.jsx(E,{value:"published",children:"Published"}),e.jsx(E,{value:"draft",children:"Draft"})]})]}),e.jsx(b,{name:"status",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"priority",className:"text-sm font-medium",children:"Priority (0-100) *"}),e.jsx(M,{as:p,id:"priority",name:"priority",type:"number",min:"0",max:"100",placeholder:"0"}),e.jsx(b,{name:"priority",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"service Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>w(!0),children:m?"Change Media":"Add Media"}),e.jsx($,{routename:route("service.edit",n.id),showModal:q,setShowModal:w,setFieldValue:r,fieldName:"image",setImagePreview:f}),m&&e.jsxs("div",{className:"relative mt-4",children:[e.jsx("img",{src:typeof m=="string"?m:URL.createObjectURL(m),alt:"service Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(x,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>y(r,"image",f),children:e.jsx(k,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-sm font-medium",children:"Thumbnail Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>S(!0),children:u?"Change Media":"Add Media"}),e.jsx($,{routename:route("service.edit",n.id),showModal:U,setShowModal:S,setFieldValue:r,fieldName:"thumbnail",setImagePreview:v}),u&&e.jsxs("div",{className:"relative mt-4",children:[e.jsx("img",{src:typeof u=="string"?u:URL.createObjectURL(u),alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(x,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>y(r,"thumbnail",v),children:e.jsx(k,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Additional Information"}),Object.keys(c).map(i=>e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("button",{type:"button",className:"w-full px-4 py-3 text-left flex items-center justify-between bg-gray-50 hover:bg-gray-100 rounded-t-lg",onClick:()=>O(i),children:[e.jsx("span",{className:"font-medium capitalize",children:i.replace("_"," ")}),N[i]?e.jsx(V,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})]}),N[i]&&e.jsx("div",{className:"p-4 space-y-4 border-t",children:Object.keys(c[i]).map(l=>{const t=c[i][l],d=`${i}_${l}`;return e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{htmlFor:d,className:"text-sm font-medium",children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),P(i,l,t,a,r)]},l)})})]},i))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>C.get(route("service.index")),children:"Cancel"}),e.jsx(x,{type:"submit",disabled:s,children:s?"Updating...":"Update service"})]})]})})})})})]})}export{ye as default};
