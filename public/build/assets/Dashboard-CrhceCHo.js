import{r as b,j as e,R as _,q as re,$ as te}from"./app-Bfy-EbOQ.js";import{A as ae}from"./AuthenticatedLayout-5CqWzxZZ.js";import{T as $,a as S,b as m,c as i,d as L,e as l}from"./table-D0cqMyM6.js";import{I as R}from"./breadcrumb-D54ZPtbu.js";import{C as g,a as u,b as p,c as f}from"./card-C52KvNQg.js";import{B as P}from"./badge-B4q_q3El.js";import{T as M,a as G,b as w,c as k}from"./tabs-BWUHx5cn.js";import"./toast-CjeiBqI2.js";import"./index-BgiNlVA7.js";import"./toaster-5hr95FP0.js";const ne=({data:s})=>{const[r,n]=b.useState(""),[c,o]=b.useState(""),[N,C]=b.useState(""),T=s.performance.top_queries.filter(t=>t.keys[0].toLowerCase().includes(r.toLowerCase())),d=s.performance.top_pages.filter(t=>t.keys[0].toLowerCase().includes(c.toLowerCase())),x=s.performance.daily_performance.filter(t=>t.keys[0].toLowerCase().includes(N.toLowerCase())),j=t=>new Intl.NumberFormat().format(t),v=t=>`${(t*100).toFixed(2)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{children:"Site Information"})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Site URL"}),e.jsx("p",{className:"font-medium",children:s.site_info.site_url})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(P,{variant:s.site_info.status==="active"?"default":"destructive",children:s.site_info.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:new Date(s.site_info.last_updated).toLocaleString()})]})]})})]}),e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{children:"Sitemaps"})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Path"}),e.jsx(i,{children:"Last Submitted"}),e.jsx(i,{children:"Last Downloaded"}),e.jsx(i,{children:"Warnings"}),e.jsx(i,{children:"Errors"})]})}),e.jsx(L,{children:s.sitemaps.list.map((t,y)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:t.path}),e.jsx(l,{children:new Date(t.last_submitted).toLocaleDateString()}),e.jsx(l,{children:new Date(t.last_downloaded).toLocaleDateString()}),e.jsx(l,{children:e.jsx(P,{variant:t.warnings>0?"destructive":"default",children:t.warnings})}),e.jsx(l,{children:e.jsx(P,{variant:t.errors>0?"destructive":"default",children:t.errors})})]},y))})]})})]}),e.jsxs(g,{children:[e.jsx(u,{children:e.jsxs(p,{children:["Performance Summary (",s.performance.period_days," days)"]})}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),e.jsx("p",{className:"text-2xl font-bold",children:j(s.performance.totals.clicks)})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),e.jsx("p",{className:"text-2xl font-bold",children:j(s.performance.totals.impressions)})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average CTR"}),e.jsx("p",{className:"text-2xl font-bold",children:v(s.performance.totals.average_ctr)})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Position"}),e.jsx("p",{className:"text-2xl font-bold",children:s.performance.totals.average_position.toFixed(2)})]})]})})]}),e.jsxs(M,{defaultValue:"queries",className:"w-full",children:[e.jsxs(G,{className:"grid grid-cols-3 w-full",children:[e.jsx(w,{value:"queries",children:"Top Queries"}),e.jsx(w,{value:"pages",children:"Top Pages"}),e.jsx(w,{value:"daily",children:"Daily Performance"})]}),e.jsx(k,{value:"queries",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(p,{children:"Top Queries"}),e.jsx(R,{placeholder:"Filter queries...",value:r,onChange:t=>n(t.target.value),className:"max-w-sm"})]})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Query"}),e.jsx(i,{className:"text-right",children:"Clicks"}),e.jsx(i,{className:"text-right",children:"Impressions"}),e.jsx(i,{className:"text-right",children:"CTR"}),e.jsx(i,{className:"text-right",children:"Position"})]})}),e.jsx(L,{children:T.map((t,y)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:t.keys[0]}),e.jsx(l,{className:"text-right",children:j(t.clicks)}),e.jsx(l,{className:"text-right",children:j(t.impressions)}),e.jsx(l,{className:"text-right",children:v(t.ctr)}),e.jsx(l,{className:"text-right",children:t.position.toFixed(2)})]},y))})]})})]})}),e.jsx(k,{value:"pages",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(p,{children:"Top Pages"}),e.jsx(R,{placeholder:"Filter pages...",value:c,onChange:t=>o(t.target.value),className:"max-w-sm"})]})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Page"}),e.jsx(i,{className:"text-right",children:"Clicks"}),e.jsx(i,{className:"text-right",children:"Impressions"}),e.jsx(i,{className:"text-right",children:"CTR"}),e.jsx(i,{className:"text-right",children:"Position"})]})}),e.jsx(L,{children:d.map((t,y)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:e.jsx("a",{href:t.keys[0],target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:t.keys[0].replace("https://thedesignsfirm.com","")||"/"})}),e.jsx(l,{className:"text-right",children:j(t.clicks)}),e.jsx(l,{className:"text-right",children:j(t.impressions)}),e.jsx(l,{className:"text-right",children:v(t.ctr)}),e.jsx(l,{className:"text-right",children:t.position.toFixed(2)})]},y))})]})})]})}),e.jsx(k,{value:"daily",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(p,{children:"Daily Performance"}),e.jsx(R,{placeholder:"Filter by date...",value:N,onChange:t=>C(t.target.value),className:"max-w-sm"})]})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Date"}),e.jsx(i,{className:"text-right",children:"Clicks"}),e.jsx(i,{className:"text-right",children:"Impressions"}),e.jsx(i,{className:"text-right",children:"CTR"}),e.jsx(i,{className:"text-right",children:"Position"})]})}),e.jsx(L,{children:x.map((t,y)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:new Date(t.keys[0]).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",weekday:"short"})}),e.jsx(l,{className:"text-right",children:j(t.clicks)}),e.jsx(l,{className:"text-right",children:j(t.impressions)}),e.jsx(l,{className:"text-right",children:v(t.ctr)}),e.jsx(l,{className:"text-right",children:t.position.toFixed(2)})]},y))})]})})]})})]})]})},ie=({data:s})=>{var c,o,N,C,T;const r=d=>(d==null?void 0:d.toLocaleString())||"0",n=(d,x)=>!x||x===0?"0%":`${(d/x*100).toFixed(1)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{className:"text-sm font-medium",children:"Total Visits"})}),e.jsx(f,{children:e.jsx("p",{className:"text-2xl font-bold",children:r(s.total_visits)})})]}),e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{className:"text-sm font-medium",children:"Unique Visitors"})}),e.jsx(f,{children:e.jsx("p",{className:"text-2xl font-bold",children:r(s.unique_visitors)})})]}),e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{className:"text-sm font-medium",children:"Bounce Rate"})}),e.jsx(f,{children:e.jsxs("p",{className:"text-2xl font-bold",children:[(c=s.bounce_rate)==null?void 0:c.toFixed(1),"%"]})})]}),e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{className:"text-sm font-medium",children:"Device Distribution"})}),e.jsx(f,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Desktop"}),e.jsx("p",{className:"text-lg font-bold",children:((o=s.device_distribution)==null?void 0:o.desktop)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mobile"}),e.jsx("p",{className:"text-lg font-bold",children:((N=s.device_distribution)==null?void 0:N.mobile)||0})]})]})})]})]}),e.jsxs(M,{defaultValue:"pages",className:"w-full",children:[e.jsxs(G,{className:"grid grid-cols-3 w-full",children:[e.jsx(w,{value:"pages",children:"Top Pages"}),e.jsx(w,{value:"sources",children:"Traffic Sources"}),e.jsx(w,{value:"countries",children:"Countries"})]}),e.jsx(k,{value:"pages",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{children:"Top Pages"})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Page URL"}),e.jsx(i,{className:"text-right",children:"Visits"}),e.jsx(i,{className:"text-right",children:"Percentage"})]})}),e.jsx(L,{children:(C=s.top_pages)==null?void 0:C.map((d,x)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:e.jsx("a",{href:d.page_url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-blue-600",children:d.page_url.replace("https://","").replace("http://","")})}),e.jsx(l,{className:"text-right",children:r(d.visits)}),e.jsx(l,{className:"text-right",children:n(d.visits,s.total_visits)})]},x))})]})})]})}),e.jsx(k,{value:"sources",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{children:"Traffic Sources"})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Source"}),e.jsx(i,{className:"text-right",children:"Visits"}),e.jsx(i,{className:"text-right",children:"Percentage"})]})}),e.jsx(L,{children:(T=s.traffic_sources)==null?void 0:T.map((d,x)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:e.jsx(P,{variant:"outline",children:d.source})}),e.jsx(l,{className:"text-right",children:r(d.visits)}),e.jsx(l,{className:"text-right",children:n(d.visits,s.total_visits)})]},x))})]})})]})}),e.jsx(k,{value:"countries",children:e.jsxs(g,{children:[e.jsx(u,{children:e.jsx(p,{children:"Country Distribution"})}),e.jsx(f,{children:e.jsxs($,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(i,{children:"Country"}),e.jsx(i,{className:"text-right",children:"Visits"}),e.jsx(i,{className:"text-right",children:"Percentage"})]})}),e.jsx(L,{children:Object.entries(s.country_distribution||{}).map(([d,x],j)=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:d}),e.jsx(l,{className:"text-right",children:r(x)}),e.jsx(l,{className:"text-right",children:n(x,s.total_visits)})]},j))})]})})]})})]})]})},le=({className:s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:e.jsx("path",{d:"m6 9 6 6 6-6"})}),ce=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"}),e.jsx("path",{d:"M7 7h.01"})]}),oe=({className:s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:e.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Q=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("path",{d:"M8 21s-4-3-4-9 4-9 4-9"}),e.jsx("path",{d:"M16 3s4 3 4 9-4 9-4 9"}),e.jsx("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),e.jsx("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]}),de=({className:s})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),e.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),D=({children:s,className:r=""})=>e.jsx("div",{className:`bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-xl shadow-sm ${r}`,children:s}),E=({children:s,className:r=""})=>e.jsx("div",{className:`p-6 ${r}`,children:s}),V=({children:s,className:r=""})=>e.jsx("div",{className:`p-6 pt-0 ${r}`,children:s}),B=({children:s,className:r=""})=>e.jsx("h3",{className:`text-xl font-semibold leading-none tracking-tight text-gray-800 dark:text-gray-200 ${r}`,children:s}),W=({children:s,className:r=""})=>e.jsx("p",{className:`text-sm text-gray-500 dark:text-gray-400 ${r}`,children:s}),U=({children:s,variant:r="default",className:n=""})=>{const c={default:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",primary:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"};return e.jsx("span",{className:`inline-flex items-center rounded-md px-2.5 py-0.5 text-xs font-semibold ${c[r]} ${n}`,children:s})},xe=({children:s,className:r=""})=>e.jsx("div",{className:`relative w-full rounded-lg border border-red-200 dark:border-red-800 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-red-600 dark:[&>svg]:text-red-400 bg-red-50 dark:bg-red-950/50 ${r}`,children:s}),he=({children:s,className:r=""})=>e.jsx("div",{className:`text-sm text-red-700 dark:text-red-300 [&_p]:leading-relaxed ${r}`,children:s}),me=({children:s,className:r=""})=>e.jsx("div",{className:`w-full text-sm ${r}`,children:e.jsx("table",{className:"w-full caption-bottom",children:s})}),je=({children:s,className:r=""})=>e.jsx("thead",{className:`[&_tr]:border-b [&_tr]:border-gray-200 dark:[&_tr]:border-gray-800 ${r}`,children:s}),ge=({children:s,className:r=""})=>e.jsx("tbody",{className:`[&_tr:last-child]:border-0 ${r}`,children:s}),Z=({children:s,className:r=""})=>e.jsx("tr",{className:`border-b border-gray-200 dark:border-gray-800 transition-colors hover:bg-gray-100/50 dark:hover:bg-gray-800/50 ${r}`,children:s}),z=({children:s,className:r=""})=>e.jsx("th",{className:`h-12 px-4 text-left align-middle font-medium text-gray-500 dark:text-gray-400 ${r}`,children:s}),J=({children:s,className:r=""})=>e.jsx("td",{className:`p-4 align-middle text-gray-800 dark:text-gray-200 ${r}`,children:s}),H=_.createContext({}),ue=({children:s,defaultValue:r})=>{const[n,c]=b.useState(r);return e.jsx(H.Provider,{value:{openItem:n,setOpenItem:c},children:s})},pe=({children:s,value:r,className:n=""})=>e.jsx("div",{className:`border-b border-gray-200 dark:border-gray-800 ${n}`,children:_.Children.map(s,c=>_.cloneElement(c,{value:r}))}),fe=({children:s,value:r})=>{const{openItem:n,setOpenItem:c}=_.useContext(H),o=n===r;return e.jsxs("button",{className:"flex flex-1 items-center justify-between w-full py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",onClick:()=>c(o?null:r),"data-state":o?"open":"closed",children:[s,e.jsx(le,{className:"h-4 w-4 shrink-0 transition-transform duration-200 text-gray-500"})]})},be=({children:s,value:r})=>{const{openItem:n}=_.useContext(H),c=n===r;return e.jsx("div",{className:`overflow-hidden text-sm transition-all ${c?"max-h-[1000px] opacity-100 pb-4":"max-h-0 opacity-0"}`,children:s})},O=_.createContext({}),Ne=({children:s,defaultValue:r})=>{const[n,c]=b.useState(r);return e.jsx(O.Provider,{value:{activeTab:n,setActiveTab:c},children:s})},ye=({children:s,className:r=""})=>e.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 dark:bg-gray-800 p-1 text-gray-500 dark:text-gray-400 ${r}`,children:s}),I=({children:s,value:r,className:n=""})=>{const{activeTab:c,setActiveTab:o}=_.useContext(O),N=c===r;return e.jsx("button",{onClick:()=>o(r),className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${N?"bg-white dark:bg-gray-950 text-gray-950 dark:text-gray-50 shadow-sm":""} ${n}`,children:s})},ve=({children:s,value:r})=>{const{activeTab:n}=_.useContext(O);return n===r?e.jsx("div",{className:"mt-4 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:s}):null},K={async getAccounts(){try{const r=await(await fetch("/api/google-tag-manager/get-accounts")).json();if(!r.success)throw new Error(r.message||"Failed to fetch accounts");return r}catch(s){throw console.error("Error fetching accounts:",s),s}},async getAccountReport(s){try{const n=await(await fetch(`/api/google-tag-manager/get-account-report/${s}`)).json();if(!n.success)throw new Error(n.message||"Failed to fetch account report");return n}catch(r){throw console.error("Error fetching account report:",r),r}},async getContainers(s){try{const n=await(await fetch(`/api/google-tag-manager/get-containers/${s}`)).json();if(!n.success)throw new Error(n.message||"Failed to fetch containers");return n}catch(r){throw console.error("Error fetching containers:",r),r}},async getContainerSummary(s,r){try{const c=await(await fetch(`/api/google-tag-manager/get-container-summary/${s}/${r}`)).json();if(!c.success)throw new Error(c.message||"Failed to fetch container summary");return c}catch(n){throw console.error("Error fetching container summary:",n),n}}};function we(){var q;const[s,r]=b.useState([]),[n,c]=b.useState(null),[o,N]=b.useState(null),[C,T]=b.useState(!1),[d,x]=b.useState(!0),[j,v]=b.useState(null);b.useEffect(()=>{t()},[]);const t=async()=>{try{x(!0),v(null);const a=await K.getAccounts();if(r(a.data),a.data.length>0){const h=a.data[0].account_id;c(h),await y(h)}}catch(a){v(a.message)}finally{x(!1)}},y=async a=>{try{T(!0),v(null);const h=await K.getAccountReport(a);N(h.data)}catch(h){v(h.message),N(null)}finally{T(!1)}},X=async a=>{a!==n&&(c(a),await y(a))},Y=({workspace:a})=>e.jsxs(Ne,{defaultValue:"tags",children:[e.jsxs(ye,{children:[e.jsxs(I,{value:"tags",children:["Tags (",a.summary.tags_count,")"]}),e.jsxs(I,{value:"triggers",children:["Triggers (",a.summary.triggers_count,")"]}),e.jsxs(I,{value:"variables",children:["Variables (",a.summary.variables_count,")"]}),e.jsxs(I,{value:"builtIn",children:["Built-in (",a.summary.built_in_variables_count,")"]})]}),e.jsx(A,{tab:"tags",items:a.tags,icon:e.jsx(ce,{className:"h-4 w-4 mr-2 text-blue-500"})}),e.jsx(A,{tab:"triggers",items:a.triggers,icon:e.jsx(oe,{className:"h-4 w-4 mr-2 text-orange-500"})}),e.jsx(A,{tab:"variables",items:a.variables,icon:e.jsx(Q,{className:"h-4 w-4 mr-2 text-purple-500"})}),e.jsx(A,{tab:"builtIn",items:a.built_in_variables,icon:e.jsx(Q,{className:"h-4 w-4 mr-2 text-green-500"})})]}),A=({tab:a,items:h,icon:ee})=>e.jsx(ve,{value:a,children:h&&h.length>0?e.jsx(D,{className:"mt-4",children:e.jsxs(me,{children:[e.jsx(je,{children:e.jsxs(Z,{children:[e.jsx(z,{children:"Name"}),e.jsx(z,{children:"Type"})]})}),e.jsx(ge,{children:h.map((F,se)=>e.jsxs(Z,{children:[e.jsxs(J,{className:"font-medium flex items-center",children:[ee," ",F.name]}),e.jsx(J,{children:e.jsx(U,{children:F.type})})]},F.name||se))})]})}):e.jsxs("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:["No ",a," found."]})});return d?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900 dark:border-gray-100 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading GTM Dashboard..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 text-gray-900 dark:text-gray-100 font-sans",children:e.jsxs("div",{className:"container mx-auto p-4 md:p-8",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Google Tag Manager Dashboard"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select an account to view its detailed report."})]}),j&&e.jsxs(xe,{className:"mb-6",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx(he,{children:j})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("aside",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 px-2",children:"GTM Accounts"}),s.length>0?e.jsx("div",{className:"space-y-1",children:s.map(a=>e.jsx("button",{onClick:()=>X(a.account_id),disabled:C,className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${n===a.account_id?"bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-gray-100":"hover:bg-gray-200/50 dark:hover:bg-gray-800/50"}`,children:a.name},a.account_id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"No accounts found"}),e.jsx("button",{onClick:t,className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Retry"})]})]}),e.jsx("main",{className:"lg:col-span-3",children:C?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900 dark:border-gray-100 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading report..."})]})}):o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsxs(E,{children:[e.jsx(B,{children:o.account_info.name}),e.jsxs(W,{children:["Account ID: ",o.account_info.account_id]})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Containers"}),e.jsx("p",{className:"font-semibold text-lg",children:o.summary.containers_count})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Workspaces"}),e.jsx("p",{className:"font-semibold text-lg",children:o.summary.total_workspaces})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Versions"}),e.jsx("p",{className:"font-semibold text-lg",children:o.summary.total_versions})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Generated"}),e.jsx("p",{className:"font-semibold",children:new Date(o.generated_at).toLocaleDateString()})]})]})})]}),o.containers&&o.containers.length>0?e.jsx(ue,{type:"single",collapsible:!0,className:"w-full",defaultValue:(q=o.containers[0])==null?void 0:q.container_info.container_id,children:o.containers.map(a=>e.jsx(pe,{value:a.container_info.container_id,children:e.jsxs(D,{children:[e.jsx(E,{className:"p-0",children:e.jsx(fe,{children:e.jsxs("div",{className:"p-6 text-left",children:[e.jsx(B,{children:a.container_info.name}),e.jsxs(W,{className:"mt-1",children:[a.container_info.public_id,e.jsx(U,{variant:"primary",className:"ml-2",children:a.container_info.usage_context.join(", ")})]})]})})}),e.jsx(be,{children:e.jsx("div",{className:"px-6 pb-6",children:a.workspaces&&a.workspaces.length>0?a.workspaces.map(h=>e.jsxs(D,{className:"bg-gray-50 dark:bg-gray-900/50",children:[e.jsxs(E,{children:[e.jsx(B,{className:"text-lg",children:h.workspace_info.name}),e.jsxs(W,{children:["Workspace ID: ",h.workspace_info.workspace_id]})]}),e.jsx(V,{children:e.jsx(Y,{workspace:h})})]},h.workspace_info.workspace_id)):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No workspaces found in this container."})})})]})},a.container_info.container_id))}):e.jsx(D,{children:e.jsx(V,{className:"py-12",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2",children:"No Containers Found"}),e.jsx("p",{children:"This account doesn't have any containers set up yet."})]})})})]}):e.jsx("div",{className:"flex items-center justify-center h-96 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"No Report Data"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Select an account to view its report."})]})})})]})]})})}function Pe(){const{stats:s,report:r}=re().props;return e.jsxs(ae,{children:[e.jsx(te,{title:"Profile"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 dark:from-gray-900 dark:to-slate-800",children:e.jsx("div",{className:"border-b bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs(M,{defaultValue:"console",className:"w-full",children:[e.jsxs(G,{className:"grid grid-cols-3 w-full",children:[e.jsx(w,{value:"console",children:"Google Search Console"}),e.jsx(w,{value:"gtm",children:"Google Tag Manager"}),e.jsx(w,{value:"seo",children:"Website SEO Analysis"})]}),e.jsx(k,{value:"console",children:r.length!==0?e.jsx(ne,{data:r}):e.jsx("p",{className:"text-gray-500",children:"No data available"})}),e.jsx(k,{value:"seo",children:e.jsx(ie,{data:s})}),e.jsx(k,{value:"gtm",children:e.jsx(we,{})})]})})})})})})]})}export{Pe as default};
