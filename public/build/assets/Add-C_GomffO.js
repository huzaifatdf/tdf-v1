import{J as A,r as m,j as e,Q as _,S as C}from"./app-6hNd6GL0.js";import{A as z}from"./AuthenticatedLayout-EMHVuOPV.js";import{I as c,B as h,C as B}from"./breadcrumb-kbLexOFl.js";import{T as E}from"./textarea-DnwG0N4b.js";import{S as J,a as Q,b as R,c as X,d as $}from"./select-DQZdMgHX.js";import{F as G,a as H,b as p,E as u}from"./formik.esm-CKT4esvm.js";import{c as U,a as W,b as x}from"./index.esm-CAaNBrmR.js";import k from"./Model-B0Cp-hTG.js";import{X as I}from"./toast-DtjBrQY6.js";import{C as Y}from"./chevron-down-cnAIUVMB.js";import"./toaster-C_dAC3gZ.js";import"./index-DRidSiyX.js";import"./index-Bb20a3-_.js";import"./alert-BWJP7RJ2.js";import"./Modal-7rtAVlJF.js";import"./transition-1OLFY3_A.js";import"./search-CsvJ18Hc.js";import"./trash-2-Do1vlzpu.js";import"./video-D7pP2sa_.js";import"./upload-DBdl7JCJ.js";import"./download-CiS4_6hJ.js";import"./eye-6Rv7DvZ6.js";function fe(){const{additionalDataStructure:o}=A().props,[f,b]=m.useState(null),[y,j]=m.useState(null),[N,M]=m.useState({specifications:!0,pricing:!0,inventory:!1,seo:!1}),T=U({title:x().required("Title is required").min(2,"Title must be at least 2 characters").max(255,"Title must not exceed 255 characters"),slug:x().required("Slug is required").matches(/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"),description:x().required("Description is required").min(10,"Description must be at least 10 characters"),status:x().required("Status is required").oneOf(["published","draft"],"Invalid status"),priority:W().required("Priority is required").min(0,"Priority must be at least 0").max(100,"Priority must not exceed 100")}),P=(t,{setSubmitting:r,resetForm:l})=>{const a=new FormData;["title","slug","description","status","priority"].forEach(i=>{a.append(i,t[i])}),t.image&&a.append("image",t.image),t.thumbnail&&a.append("thumbnail",t.thumbnail);const s={};Object.keys(o).forEach(i=>{s[i]={},Object.keys(o[i]).forEach(d=>{const g=`${i}_${d}`;t[g]!==void 0&&t[g]!==""&&(s[i][d]=t[g])}),Object.keys(s[i]).length===0&&delete s[i]}),Object.keys(s).length>0&&a.append("additional_data",JSON.stringify(s)),C.post(route("industry.store"),a,{forceFormData:!0,onSuccess:()=>{r(!1),l(),b(null),j(null)},onError:i=>{r(!1)}})},v=(t,r,l)=>{t(r,null),l(null)},q=t=>{M(r=>({...r,[t]:!r[t]}))},D=(t,r,l,a,n)=>{const s=`${t}_${r}`,i=a[s]||"";switch(l.type){case"textarea":return e.jsx(E,{id:s,name:s,value:i,onChange:d=>n(s,d.target.value),placeholder:`Enter ${l.label.toLowerCase()}`,rows:3});case"number":return e.jsx(c,{id:s,name:s,type:"number",value:i,onChange:d=>n(s,d.target.value),placeholder:`Enter ${l.label.toLowerCase()}`,step:"0.01"});default:return e.jsx(c,{id:s,name:s,type:"text",value:i,onChange:d=>n(s,d.target.value),placeholder:`Enter ${l.label.toLowerCase()}`})}},F=()=>{const t={title:"",description:"",image:null,thumbnail:null,status:"",priority:0};return Object.keys(o).forEach(r=>{Object.keys(o[r]).forEach(l=>{const a=`${r}_${l}`;t[a]=""})}),t},[O,w]=m.useState(!1),[L,S]=m.useState(!1);return e.jsxs(z,{children:[e.jsx(_,{title:"Add industry"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsx("div",{className:"w-full",children:e.jsx(G,{initialValues:F(),validationSchema:T,onSubmit:P,children:({isSubmitting:t,setFieldValue:r,values:l})=>e.jsxs(H,{className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"industry Title *"}),e.jsx(p,{as:c,id:"title",name:"title",placeholder:"Enter industry title"}),e.jsx(u,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"slug",className:"text-sm font-medium",children:"industry Slug *"}),e.jsx(p,{as:c,id:"slug",name:"slug",placeholder:"Enter industry slug"}),e.jsx(u,{name:"slug",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description *"}),e.jsx(p,{as:E,id:"description",name:"description",placeholder:"Enter industry description",rows:4}),e.jsx(u,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),e.jsxs(J,{name:"status",value:l.status,onValueChange:a=>r("status",a),children:[e.jsx(Q,{children:e.jsx(R,{placeholder:"Select status"})}),e.jsxs(X,{children:[e.jsx($,{value:"published",children:"Published"}),e.jsx($,{value:"draft",children:"Draft"})]})]}),e.jsx(u,{name:"status",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"priority",className:"text-sm font-medium",children:"Priority (0-100) *"}),e.jsx(p,{as:c,id:"priority",name:"priority",type:"number",min:"0",max:"100",placeholder:"0"}),e.jsx(u,{name:"priority",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"industry Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>w(!0),children:"Add Media"}),e.jsx(k,{routename:route("industry.create"),showModal:O,setShowModal:w,setFieldValue:r,fieldName:"image",setImagePreview:b}),f&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:f,alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(h,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>v(r,"image",b),children:e.jsx(I,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-sm font-medium",children:"Thumbnail Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>S(!0),children:"Add Media"}),e.jsx(k,{routename:route("industry.create"),showModal:L,setShowModal:S,setFieldValue:r,fieldName:"thumbnail",setImagePreview:j}),y&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y,alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(h,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>v(r,"thumbnail",j),children:e.jsx(I,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Additional Information"}),Object.keys(o).map(a=>e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("button",{type:"button",className:"w-full px-4 py-3 text-left flex items-center justify-between bg-gray-50 hover:bg-gray-100 rounded-t-lg",onClick:()=>q(a),children:[e.jsx("span",{className:"font-medium capitalize",children:a.replace("_"," ")}),N[a]?e.jsx(Y,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})]}),N[a]&&e.jsx("div",{className:"p-4 space-y-4 border-t",children:Object.keys(o[a]).map(n=>{const s=o[a][n],i=`${a}_${n}`;return e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{htmlFor:i,className:"text-sm font-medium",children:[s.label,s.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),D(a,n,s,l,r)]},n)})})]},a))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>C.get(route("industry.index")),children:"Cancel"}),e.jsx(h,{type:"submit",disabled:t,children:t?"Creating...":"Create industry"})]})]})})})})})]})}export{fe as default};
