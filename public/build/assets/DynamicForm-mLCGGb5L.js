import{R as x,d as T,r as I,j as t,m as A}from"./app-tl8YhgeP.js";function B(k){const[R,q]=x.useState(!1),[o,$]=x.useState(null),[h,d]=x.useState({}),[b,N]=x.useState({}),[V,P]=x.useState(!1),[w,g]=x.useState({}),[y,v]=x.useState(!1),[E,S]=x.useState({}),{formSlug:O}=k;x.useEffect(()=>{T.get(`/api/v1/form/${O}`).then(e=>{console.log(e.data),$(e.data.form);const s={},a={};e.data.fields.forEach(r=>{if(r.type==="checkbox"&&r.options?s[r.name]=[]:r.default_value?s[r.name]=r.default_value:s[r.name]="",(r.type==="radio"||r.type==="checkbox")&&r.options&&Object.keys(r.options).length>1){const n=Object.keys(r.options)[0];a[r.name]=n}}),d(s),S(a)}).catch(e=>{console.error("Error fetching form:",e)})},[]);const m=(e,s)=>{d(a=>({...a,[e]:s})),w[e]&&g(a=>({...a,[e]:null}))},D=(e,s)=>{s&&(N(a=>({...a,[e]:s})),d(a=>({...a,[e]:s.name})))},F=(e,s,a)=>{d(r=>{const n=r[e]||[];return a?{...r,[e]:[...n,s]}:{...r,[e]:n.filter(i=>i!==s)}})},f=(e,s)=>{S(a=>({...a,[e]:s}))},_=async e=>{e.preventDefault(),v(!0),g({});try{const s=new FormData;console.log(h),Object.keys(h).forEach(n=>{Array.isArray(h[n])?h[n].forEach(i=>{s.append(`${n}[]`,i)}):s.append(n,h[n]||"")}),Object.keys(b).forEach(n=>{b[n]&&s.append(n,b[n])});const a=A.post(route("client.submit.form",o.slug),s,{preserveScroll:!0,preserveState:!0,headers:{"Content-Type":"multipart/form-data"}}),r={};o.fields.forEach(n=>{n.type==="checkbox"&&n.options?r[n.name]=[]:r[n.name]=""}),d(r),N({}),q(!1)}catch(s){console.error("Form submission error:",s),s.response&&s.response.data&&s.response.data.errors?g(s.response.data.errors):alert("There was an error submitting the form. Please try again.")}finally{v(!1)}},L=e=>{var C;const s=h[e.name]||"",a=w[e.name],r=`field-${e.name}`,n=E[e.name],i="w-full bg-transparent ",p=a?"border-red-500":"";switch(e.type){case"text":case"email":case"url":case"tel":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:r,type:e.type,value:s,onChange:c=>m(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,maxLength:e.max_length,minLength:e.min_length,className:`${i} ${p}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"number":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:r,type:"number",value:s,onChange:c=>m(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,className:`${i} ${p}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"textarea":return t.jsxs("div",{className:"w-full",children:[t.jsx("textarea",{id:r,value:s,onChange:c=>m(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,maxLength:e.max_length,minLength:e.min_length,rows:4,className:`${i} ${p}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"select":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsxs("select",{id:r,value:s,onChange:c=>m(e.name,c.target.value),required:e.required,className:`${i} ${p}`,children:[t.jsx("option",{value:"",children:e.placeholder||`Select ${e.label}`}),e.options&&Object.entries(e.options).map(([c,l])=>t.jsx("option",{value:c,children:l},c))]}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"radio":if(e.options&&Object.keys(e.options).length>1){const c=Object.entries(e.options);return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"flex mb-6 mt-6 text-sm",children:c.map(([l,u],j)=>t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{type:"button",onClick:()=>{f(e.name,l),m(e.name,u)},className:"flex flex-col items-start pr-6 text-left",children:[t.jsxs("span",{className:"fc-primary",children:["0",j+1]}),t.jsxs("span",{className:`relative text-[18px] ${n===l?"text-lime-400":"text-white"}`,children:[u,n===l&&t.jsx("span",{className:"absolute left-0 -bottom-1 w-1/2 border-b-2 border-lime-400"})]})]}),j<c.length-1&&t.jsx("div",{className:"border-r border-gray-600 h-6 mx-3"})]},l))}),t.jsx("div",{className:"mt-4 hidden",children:t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"hidden",name:e.name,value:n,required:e.required,className:"mr-2"}),"Select ",e.options[n]]})}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id)}else return t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-white mb-2",children:e.label}),t.jsx("div",{className:"space-y-2",children:e.options&&Object.entries(e.options).map(([c,l])=>t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"radio",name:e.name,value:c,checked:s===c,onChange:u=>m(e.name,u.target.value),required:e.required,className:"mr-2"}),l]},c))}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"checkbox":if(e.options&&Object.keys(e.options).length>1){const c=Object.entries(e.options);return t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-white mb-2",children:e.label}),t.jsx("div",{className:"flex mb-6 mt-6 text-sm",children:c.map(([l,u],j)=>t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{type:"button",onClick:()=>f(e.name,l),className:"flex flex-col items-start pr-6 text-left",children:[t.jsxs("span",{className:"fc-primary",children:["0",j+1]}),t.jsxs("span",{className:`relative text-[18px] ${n===l?"text-lime-400":"text-white"}`,children:[u,n===l&&t.jsx("span",{className:"absolute left-0 -bottom-1 w-1/2 border-b-2 border-lime-400"})]})]}),j<c.length-1&&t.jsx("div",{className:"border-r border-gray-600 h-6 mx-3"})]},l))}),t.jsx("div",{className:"mt-4",children:t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"checkbox",checked:(s||[]).includes(n),onChange:l=>F(e.name,n,l.target.checked),className:"mr-2"}),"Select ",e.options[n]]})}),s&&s.length>0&&t.jsx("div",{className:"mt-2",children:t.jsxs("p",{className:"text-sm text-gray-400",children:["Selected: ",s.map(l=>e.options[l]).join(", ")]})}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id)}else return t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"checkbox",checked:!!s,onChange:c=>m(e.name,c.target.checked),className:"mr-2"}),e.placeholder||e.label]}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"file":return t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-white mb-2",children:e.label}),t.jsx("input",{id:r,type:"file",onChange:c=>D(e.name,c.target.files[0]),required:e.required,accept:((C=e.options)==null?void 0:C.accept)||"*",className:"w-full p-3 bg-transparent border border-gray-600 rounded-md text-white file:bg-purple-600 file:text-white file:border-none file:rounded file:px-4 file:py-2 file:mr-4"}),b[e.name]&&t.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Selected: ",b[e.name].name]}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"date":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:r,type:"date",value:s,onChange:c=>m(e.name,c.target.value),required:e.required,className:`${i} ${p}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"hidden":return t.jsx("input",{type:"hidden",name:e.name,value:s||e.default_value||""},e.id);default:return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:r,type:"text",value:s,onChange:c=>m(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,className:`${i} ${p}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id)}};return I.useEffect(()=>{o&&o.fields&&o.fields.forEach(e=>{(e.type==="radio"||e.type==="checkbox")&&e.options&&m(e.name,e.options[0])})},[o]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"",children:[o&&o.fields&&t.jsx("form",{onSubmit:_,className:"",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 py-6 transform transition-transform duration-500 ease-in-out",children:[t.jsx("div",{className:"flex flex-col md:flex-row md:flex-wrap gap-4 text-white justify-between",children:o.fields.map(e=>L(e))}),t.jsxs("button",{type:"submit",disabled:y,className:"group flex items-center justify-content-end gap-2 bg-transparent border-none fc-primary transition-colors duration-300 text-lg font-medium cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:[y?"Submitting...":o.submit_button_text||"Submit",t.jsx("span",{className:"fc-purple group-hover:translate-x-1 transition-transform",children:"â†’"})]})]})}),!o&&t.jsx("div",{className:"flex items-center justify-center text-white",children:t.jsx("p",{children:"Loading form..."})})]})})}export{B as D};
