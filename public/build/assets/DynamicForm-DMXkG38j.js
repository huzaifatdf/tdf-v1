import{R as x,d as L,r as T,j as t,m as A}from"./app-DEsnWvgU.js";function B(q){const[I,R]=x.useState(!0),[m,$]=x.useState(null),[u,b]=x.useState({}),[j,v]=x.useState({}),[V,P]=x.useState(!1),[p,y]=x.useState({}),[S,f]=x.useState(!1),[N,C]=x.useState({}),{formSlug:E}=q;x.useEffect(()=>{L.get(`/api/v1/form/${E}`).then(e=>{console.log(e.data),$(e.data.form);const s={},a={};e.data.fields.forEach(n=>{if(n.type==="checkbox"&&n.options?s[n.name]=[]:n.default_value?s[n.name]=n.default_value:s[n.name]="",(n.type==="radio"||n.type==="checkbox")&&n.options&&Object.keys(n.options).length>1){const r=Object.keys(n.options)[0];a[n.name]=r}}),b(s),C(a)}).catch(e=>{console.error("Error fetching form:",e)})},[]);const i=(e,s)=>{b(a=>({...a,[e]:s})),p[e]&&y(a=>({...a,[e]:null}))},O=(e,s)=>{s&&(v(a=>({...a,[e]:s})),b(a=>({...a,[e]:s.name})))},F=(e,s,a)=>{b(n=>{const r=n[e]||[];return a?{...n,[e]:[...r,s]}:{...n,[e]:r.filter(o=>o!==s)}})},k=(e,s)=>{C(a=>({...a,[e]:s}))},_=async e=>{e.preventDefault(),f(!0),y({});try{const s=new FormData;Object.keys(u).forEach(r=>{Array.isArray(u[r])?u[r].forEach(o=>{s.append(`${r}[]`,o)}):s.append(r,u[r]||"")}),Object.keys(j).forEach(r=>{j[r]&&s.append(r,j[r])});const a=A.post(route("client.submit.form",m.slug),s,{preserveScroll:!0,preserveState:!0,headers:{"Content-Type":"multipart/form-data"}});let n={};m.fields.forEach(r=>{var o;if(r.type==="radio"&&r.options){const h=N==null?void 0:N[r.name],w=((o=r.options)==null?void 0:o[h])||"";n[r.name]=w}else r.type==="checkbox"&&r.options?n[r.name]=[]:n[r.name]=""}),b(n),v({})}catch(s){console.error("Form submission error:",s),s.response&&s.response.data&&s.response.data.errors?y(s.response.data.errors):alert("There was an error submitting the form. Please try again.")}finally{f(!1)}},D=e=>{var w;const s=u[e.name]||"",a=p[e.name],n=`field-${e.name}`,r=N[e.name],o="w-full bg-transparent ",h=a?"border-red-500":"";switch(e.type){case"text":case"email":case"url":case"tel":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:n,type:e.type,value:s,onChange:c=>i(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,maxLength:e.max_length,minLength:e.min_length,className:`${o} ${h}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"number":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:n,type:"number",value:s,onChange:c=>i(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,className:`${o} ${h}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"textarea":return t.jsxs("div",{className:"w-full",children:[t.jsx("textarea",{id:n,value:s,onChange:c=>i(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,maxLength:e.max_length,minLength:e.min_length,rows:4,className:`${o} ${h}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"select":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsxs("select",{id:n,value:s,onChange:c=>i(e.name,c.target.value),required:e.required,className:`${o} ${h}`,children:[t.jsx("option",{value:"",children:e.placeholder||`Select ${e.label}`}),e.options&&Object.entries(e.options).map(([c,l])=>t.jsx("option",{value:c,children:l},c))]}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"radio":if(e.options&&Object.keys(e.options).length>1){const c=Object.entries(e.options);return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"flex mb-6 mt-6 text-sm",children:c.map(([l,d],g)=>t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{type:"button",onClick:()=>{k(e.name,l),i(e.name,d)},className:"flex flex-col items-start pr-6 text-left",children:[t.jsxs("span",{className:"fc-primary",children:["0",g+1]}),t.jsxs("span",{className:`relative text-[22px] ${r===l?"fc-secondary":"text-white"}`,children:[d,r===l&&t.jsx("span",{className:"absolute left-0 -bottom-1 w-1/2 border-b-2 border-lime-400"})]})]}),g<c.length-1&&t.jsx("div",{className:"border-r border-gray-600 h-6 mx-3"})]},l))}),t.jsx("div",{className:"mt-4 hidden",children:t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"hidden",name:e.name,value:r,required:e.required,className:"mr-2"}),"Select ",e.options[r]]})}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id)}else return t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-white mb-2",children:e.label}),t.jsx("div",{className:"space-y-2",children:e.options&&Object.entries(e.options).map(([c,l])=>t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"radio",name:e.name,value:c,checked:s===c,onChange:d=>i(e.name,d.target.value),required:e.required,className:"mr-2"}),l]},c))}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"checkbox":if(e.options&&Object.keys(e.options).length>1){const c=Object.entries(e.options);return t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-white mb-2",children:e.label}),t.jsx("div",{className:"flex mb-6 mt-6 text-sm",children:c.map(([l,d],g)=>t.jsxs("div",{className:"flex items-center",children:[t.jsxs("button",{type:"button",onClick:()=>k(e.name,l),className:"flex flex-col items-start pr-6 text-left",children:[t.jsxs("span",{className:"fc-primary",children:["0",g+1]}),t.jsxs("span",{className:`relative text-[18px] ${r===l?"fc-secondary":"text-white"}`,children:[d,r===l&&t.jsx("span",{className:"absolute left-0 -bottom-1 w-1/2 border-b-2 border-lime-400"})]})]}),g<c.length-1&&t.jsx("div",{className:"border-r border-gray-600 h-6 mx-3"})]},l))}),t.jsx("div",{className:"mt-4",children:t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"checkbox",checked:(s||[]).includes(r),onChange:l=>F(e.name,r,l.target.checked),className:"mr-2"}),"Select ",e.options[r]]})}),s&&s.length>0&&t.jsx("div",{className:"mt-2",children:t.jsxs("p",{className:"text-sm text-gray-400",children:["Selected: ",s.map(l=>e.options[l]).join(", ")]})}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id)}else return t.jsxs("div",{className:"w-full",children:[t.jsxs("label",{className:"flex items-center text-white",children:[t.jsx("input",{type:"checkbox",checked:!!s,onChange:c=>i(e.name,c.target.checked),className:"mr-2"}),e.placeholder||e.label]}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"file":return t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-white mb-2",children:e.label}),t.jsx("input",{id:n,type:"file",onChange:c=>O(e.name,c.target.files[0]),required:e.required,accept:((w=e.options)==null?void 0:w.accept)||"*",className:"w-full p-3 bg-transparent border border-gray-600 rounded-md text-white file:bg-purple-600 file:text-white file:border-none file:rounded file:px-4 file:py-2 file:mr-4"}),j[e.name]&&t.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Selected: ",j[e.name].name]}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"date":return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:n,type:"date",value:s,onChange:c=>i(e.name,c.target.value),required:e.required,className:`${o} ${h}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id);case"hidden":return t.jsx("input",{type:"hidden",name:e.name,value:s||e.default_value||""},e.id);default:return t.jsxs("div",{className:e.width==="half"?"w-full md:w-[45%]":"w-full",children:[t.jsx("input",{id:n,type:"text",value:s,onChange:c=>i(e.name,c.target.value),placeholder:e.placeholder||e.label,required:e.required,className:`${o} ${h}`}),a&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]},e.id)}};return T.useEffect(()=>{m&&m.fields&&m.fields.forEach(e=>{(e.type==="radio"||e.type==="checkbox")&&e.options&&i(e.name,e.options[0])})},[m]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"",children:[m&&m.fields&&t.jsx("form",{onSubmit:_,className:"",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 py-6 transform transition-transform duration-500 ease-in-out",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap gap-4 text-white justify-between",children:[m.fields.map(e=>D(e)),t.jsxs("div",{className:"w-full",children:[t.jsx("div",{id:"recaptcha-container",className:"flex justify-start"}),p["g-recaptcha-response"]&&t.jsx("p",{className:"text-red-500 text-sm mt-2",children:Array.isArray(p["g-recaptcha-response"])?p["g-recaptcha-response"][0]:p["g-recaptcha-response"]})]})]}),t.jsxs("button",{type:"submit",disabled:S,className:"group flex items-center justify-content-end gap-2 bg-transparent border-none fc-primary transition-colors duration-300 text-lg font-medium cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:[S?"Submitting...":m.submit_button_text||"Submit",t.jsx("span",{className:"fc-purple group-hover:translate-x-1 transition-transform",children:"â†’"})]})]})}),!m&&t.jsx("div",{className:"flex items-center justify-center text-white",children:t.jsx("p",{children:"Loading form..."})})]})})}export{B as default};
