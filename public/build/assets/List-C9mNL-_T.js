import{q as I,r as i,m as d,j as e,$ as V}from"./app-B8Zi8E_1.js";import{A}from"./AuthenticatedLayout-C4qzSG6f.js";import{u as F,T as z,a as E,b as g,c as H,f as m,d as K,e as p,C as j,A as _,g as L,h as B,i as O,j as $}from"./table-Csyt1Kgr.js";import{I as q,D as C,a as v,B as a,b as w,d as J,T as U,e as G,f as Q,g as W,E as X,h as Y,i as f}from"./toast-BBV5ZX0m.js";import{P as Z,D as ee,a as se,b as le,c as te,d as ae,e as ie,f as ne}from"./dialog-ikbs0lsc.js";import{C as re}from"./chevron-down-Cdsy_y1n.js";import"./createLucideIcon-mC1txkHI.js";import"./index-C7kckvBz.js";import"./index-B7zSj4_F.js";function je(){var x,u;const{services:n,filters:S,sort:b}=I().props,[r,N]=i.useState(b||[]),[o,D]=i.useState(S||[]),[y,R]=i.useState({}),[P,T]=i.useState({}),[c,M]=i.useState({pageIndex:n.current_page-1,pageSize:n.per_page}),h=[{id:"select",header:({table:s})=>e.jsx(j,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>s.toggleAllPageRowsSelected(!!l),"aria-label":"Select all"}),cell:({row:s})=>e.jsx(j,{checked:s.getIsSelected(),onCheckedChange:l=>s.toggleSelected(!!l),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:"ID",cell:({row:s})=>e.jsx("div",{children:s.getValue("id")})},{accessorKey:"title",header:"Title",cell:({row:s})=>e.jsx("div",{children:s.getValue("title")})},{accessorKey:"slug",header:({column:s})=>e.jsxs(a,{variant:"slug",onClick:()=>s.toggleSorting(s.getIsSorted()==="slug"),children:["Slug",e.jsx(_,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("slug")})},{accessorKey:"status",header:"Status",cell:({row:s})=>e.jsx("div",{children:s.getValue("status")})},{accessorKey:"created_at",header:"Joined At",cell:({row:s})=>new Date(s.getValue("created_at")).toLocaleDateString()},{id:"actions",enableHiding:!1,cell:({row:s})=>{const l=s.original;return e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(a,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(X,{className:"h-4 w-4"})]})}),e.jsxs(w,{align:"end",children:[e.jsx(Y,{children:"Actions"}),e.jsx(f,{onClick:()=>d.get(route("service.edit",l.id)),className:"cursor-pointer",children:"Edit service"}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{className:"cursor-pointer",onSelect:k=>k.preventDefault(),children:"Delete service"})}),e.jsxs(le,{className:"sm:max-w-[425px]",children:[e.jsxs(te,{children:[e.jsx(ae,{children:"Delete service"}),e.jsx(ie,{children:"Are you sure you want to delete this service? This action cannot be undone."})]}),e.jsx("div",{className:"grid gap-4 py-4"}),e.jsx(ne,{children:e.jsx(a,{variant:"destructive",onClick:()=>{d.delete(route("service.destroy",l.id))},children:"Confirm Delete"})})]})]})]})]})}}];i.useEffect(()=>{const s={};o.length>0&&(s.filters=Object.fromEntries(o.map(l=>[l.id,l.value]))),r.length>0&&(s.sort={key:r[0].id,order:r[0].desc?"desc":"asc"}),s.page=c.pageIndex+1,s.perPage=c.pageSize,d.get(route("service.index"),s,{preserveState:!0,replace:!0})},[o,r,c]);const t=F({data:n.data,columns:h,pageCount:n.last_page,state:{sorting:r,columnFilters:o,columnVisibility:y,rowSelection:P,pagination:c},onSortingChange:N,onColumnFiltersChange:D,onColumnVisibilityChange:R,onRowSelectionChange:T,onPaginationChange:M,getCoreRowModel:$(),getPaginationRowModel:O(),getSortedRowModel:B(),getFilteredRowModel:L(),manualPagination:!0,manualSorting:!0,manualFiltering:!0});return e.jsxs(A,{children:[e.jsx(V,{title:"services"}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4",children:[e.jsx(q,{placeholder:"Filter title...",value:((x=t.getColumn("title"))==null?void 0:x.getFilterValue())??"",onChange:s=>{var l;return(l=t.getColumn("title"))==null?void 0:l.setFilterValue(s.target.value)},className:"max-w-sm"}),e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(a,{variant:"outline",className:"ml-auto",children:["Columns ",e.jsx(re,{className:"ml-2 h-4 w-4"})]})}),e.jsx(w,{align:"end",children:t.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(J,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:l=>s.toggleVisibility(!!l),children:s.id},s.id))})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(z,{children:[e.jsx(E,{children:t.getHeaderGroups().map(s=>e.jsx(g,{children:s.headers.map(l=>e.jsx(H,{children:l.isPlaceholder?null:m(l.column.columnDef.header,l.getContext())},l.id))},s.id))}),e.jsx(K,{children:(u=t.getRowModel().rows)!=null&&u.length?t.getRowModel().rows.map(s=>e.jsx(g,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(l=>e.jsx(p,{children:m(l.column.columnDef.cell,l.getContext())},l.id))},s.id)):e.jsx(g,{children:e.jsx(p,{colSpan:h.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[t.getFilteredSelectedRowModel().rows.length," of"," ",n.total," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:"Previous"}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:"Next"})]})]})]})}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsx(U,{children:e.jsxs(G,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(a,{size:"md",className:"rounded-full h-14 w-14 shadow-lg hover:shadow-xl transition-shadow",onClick:()=>d.get(route("service.create")),children:[e.jsx(Z,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Add service"})]})}),e.jsx(W,{children:e.jsx("p",{children:"Add service"})})]})})})]})]})}export{je as default};
