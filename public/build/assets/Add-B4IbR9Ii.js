import{J,r as c,j as e,Q,S as P}from"./app-BNHhm83p.js";import{A as R}from"./AuthenticatedLayout-Ckl3N_vg.js";import{I as m,B as u,C as X}from"./breadcrumb-BXXhr0Kg.js";import{T as $}from"./textarea-DXBWZEVy.js";import{S as G,a as H,b as U,c as W,d as F}from"./select-DZlvVOWZ.js";import{F as Y,a as Z,b as x,E as h}from"./formik.esm-DSd6aCGt.js";import{c as K,a as V,b as p}from"./index.esm-xb5G0teW.js";import N from"./Model-DXAbSiaq.js";import{X as v}from"./toast-Cie9-BTa.js";import{C as ee}from"./chevron-down-nbsq-1ma.js";import"./toaster-DNz2hCA0.js";import"./index-DJRzob_a.js";import"./index-KFn-74Vv.js";import"./alert-Dl48ridQ.js";import"./Modal-aPQG1-bj.js";import"./transition-C-XxazBt.js";import"./search-CQ6koirk.js";import"./trash-2--apMS93n.js";import"./video-DdQsdoLM.js";import"./upload-BM4QwXGc.js";import"./download-MzQ1TDkW.js";import"./eye-u00nQqdS.js";function we(){const{additionalDataStructure:o}=J().props,[y,b]=c.useState(null),[w,j]=c.useState(null),[S,C]=c.useState(null),[M,T]=c.useState({specifications:!0,pricing:!0,inventory:!1,seo:!1}),q=K({title:p().required("Title is required").min(2,"Title must be at least 2 characters").max(255,"Title must not exceed 255 characters"),slug:p().required("Slug is required").matches(/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"),description:p().required("Description is required").min(10,"Description must be at least 10 characters"),status:p().required("Status is required").oneOf(["published","draft"],"Invalid status"),priority:V().required("Priority is required").min(0,"Priority must be at least 0").max(100,"Priority must not exceed 100")}),L=(a,{setSubmitting:s,resetForm:l})=>{const t=new FormData;["title","slug","description","status","priority"].forEach(i=>{t.append(i,a[i])}),a.image&&t.append("image",a.image),a.thumbnail&&t.append("thumbnail",a.thumbnail),a.featured&&t.append("featuredimage",a.featured);const r={};Object.keys(o).forEach(i=>{r[i]={},Object.keys(o[i]).forEach(n=>{const f=`${i}_${n}`;a[f]!==void 0&&a[f]!==""&&(r[i][n]=a[f])}),Object.keys(r[i]).length===0&&delete r[i]}),Object.keys(r).length>0&&t.append("additional_data",JSON.stringify(r)),P.post(route("case.store"),t,{forceFormData:!0,onSuccess:()=>{s(!1),l(),b(null),j(null)},onError:i=>{s(!1)}})},g=(a,s,l)=>{a(s,null),l(null)},D=a=>{T(s=>({...s,[a]:!s[a]}))},O=(a,s,l,t,d)=>{const r=`${a}_${s}`,i=t[r]||"";switch(l.type){case"textarea":return e.jsx($,{id:r,name:r,value:i,onChange:n=>d(r,n.target.value),placeholder:`Enter ${l.label.toLowerCase()}`,rows:3});case"number":return e.jsx(m,{id:r,name:r,type:"number",value:i,onChange:n=>d(r,n.target.value),placeholder:`Enter ${l.label.toLowerCase()}`,step:"0.01"});default:return e.jsx(m,{id:r,name:r,type:"text",value:i,onChange:n=>d(r,n.target.value),placeholder:`Enter ${l.label.toLowerCase()}`})}},A=()=>{const a={title:"",description:"",image:null,thumbnail:null,status:"",priority:0};return Object.keys(o).forEach(s=>{Object.keys(o[s]).forEach(l=>{const t=`${s}_${l}`;a[t]=""})}),a},[_,E]=c.useState(!1),[z,k]=c.useState(!1),[B,I]=c.useState(!1);return e.jsxs(R,{children:[e.jsx(Q,{title:"Add Case"}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsx("div",{className:"w-full",children:e.jsx(Y,{initialValues:A(),validationSchema:q,onSubmit:L,children:({isSubmitting:a,setFieldValue:s,values:l})=>e.jsxs(Z,{className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"Case Title *"}),e.jsx(x,{as:m,id:"title",name:"title",placeholder:"Enter case title"}),e.jsx(h,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"slug",className:"text-sm font-medium",children:"Case Slug *"}),e.jsx(x,{as:m,id:"slug",name:"slug",placeholder:"Enter case slug"}),e.jsx(h,{name:"slug",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description *"}),e.jsx(x,{as:$,id:"description",name:"description",placeholder:"Enter case description",rows:4}),e.jsx(h,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),e.jsxs(G,{name:"status",value:l.status,onValueChange:t=>s("status",t),children:[e.jsx(H,{children:e.jsx(U,{placeholder:"Select status"})}),e.jsxs(W,{children:[e.jsx(F,{value:"published",children:"Published"}),e.jsx(F,{value:"draft",children:"Draft"})]})]}),e.jsx(h,{name:"status",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"priority",className:"text-sm font-medium",children:"Priority (0-100) *"}),e.jsx(x,{as:m,id:"priority",name:"priority",type:"number",min:"0",max:"100",placeholder:"0"}),e.jsx(h,{name:"priority",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"Featured Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>E(!0),children:"Add Media"}),e.jsx(N,{routename:route("case.create"),showModal:_,setShowModal:E,setFieldValue:s,fieldName:"featured",setImagePreview:C}),S&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:S,alt:"Featured Image Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>g(s,"featured",C),children:e.jsx(v,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"Case Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>k(!0),children:"Add Media"}),e.jsx(N,{routename:route("case.create"),showModal:z,setShowModal:k,setFieldValue:s,fieldName:"image",setImagePreview:b}),y&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y,alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>g(s,"image",b),children:e.jsx(v,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-sm font-medium",children:"Thumbnail Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx("button",{type:"button",onClick:()=>I(!0),children:"Add Media"}),e.jsx(N,{routename:route("case.create"),showModal:B,setShowModal:I,setFieldValue:s,fieldName:"thumbnail",setImagePreview:j}),w&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w,alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg mx-auto"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:()=>g(s,"thumbnail",j),children:e.jsx(v,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Additional Information"}),Object.keys(o).map(t=>e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("button",{type:"button",className:"w-full px-4 py-3 text-left flex items-center justify-between bg-gray-50 hover:bg-gray-100 rounded-t-lg",onClick:()=>D(t),children:[e.jsx("span",{className:"font-medium capitalize",children:t.replace("_"," ")}),M[t]?e.jsx(ee,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"})]}),M[t]&&e.jsx("div",{className:"p-4 space-y-4 border-t",children:Object.keys(o[t]).map(d=>{const r=o[t][d],i=`${t}_${d}`;return e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("label",{htmlFor:i,className:"text-sm font-medium",children:[r.label,r.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),O(t,d,r,l,s)]},d)})})]},t))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>P.get(route("case.index")),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:a,children:a?"Creating...":"Create Case"})]})]})})})})})]})}export{we as default};
