import{J,r as o,S as $,j as e,Q as B}from"./app-DDeR04fJ.js";import{A as Q}from"./AuthenticatedLayout-C9TSET7U.js";import{I as b,B as u,C as W}from"./breadcrumb-57LKk3G4.js";import{T as I}from"./textarea-CWFyMfkU.js";import{S as X,a as G,b as H,c as Y,d as O}from"./select-DdpKh6Sp.js";import{F as Z,a as K,b as j,E as g}from"./formik.esm-BN2OD_nh.js";import{c as V,a as ee,b as f}from"./index.esm-El8C50Xw.js";import y from"./Model-DKmz0Tsf.js";import{S as ae}from"./SummernoteInput-CNjwkO7o.js";import{X as w}from"./toast-BWfX1y_t.js";import{C as te}from"./chevron-down-DQ8JSdSH.js";import"./toaster-CfNT-Fey.js";import"./index-B8JInCRC.js";import"./index-C5Bphy3Z.js";import"./alert-m-g5tzpB.js";import"./Modal-BiUYxdjW.js";import"./transition-BItKJv8r.js";import"./search-D7px2KTv.js";import"./trash-2-BHW26Td8.js";import"./video-BgzzyxSE.js";import"./upload-BBbY7S2m.js";import"./download-pzA3dGa6.js";import"./eye-DR8GaG5K.js";function ke(){const{caselist:i,additionalDataStructure:c,appUrl:N}=J().props,[h,S]=o.useState(N+"/"+i.image||null),[p,C]=o.useState(N+"/"+i.thumbnail||null),[x,k]=o.useState(N+"/"+i.featuredimage||null),[M,T]=o.useState({Detail:!1,"Our Work":!1,Problem:!1,"problem Solutions":!1,seo:!1}),D=V({title:f().required("Title is required").min(2,"Title must be at least 2 characters").max(255,"Title must not exceed 255 characters"),slug:f().required("Slug is required").matches(/^[a-z0-9-]+$/,"Slug can only contain lowercase letters, numbers, and hyphens"),description:f().required("Description is required").min(10,"Description must be at least 10 characters"),status:f().required("Status is required").oneOf(["published","draft"],"Invalid status"),priority:ee().required("Priority is required").min(0,"Priority must be at least 0").max(100,"Priority must not exceed 100")}),F=o.useCallback((s,{setSubmitting:r})=>{const t=new FormData;["title","slug","description","status","priority"].forEach(a=>{t.append(a,s[a])}),t.append("image",s.image),t.append("thumbnail",s.thumbnail),t.append("featuredimage",s.featured);const l={};Object.keys(c).forEach(a=>{l[a]={},Object.keys(c[a]).forEach(m=>{const d=`${a}_${m}`;s[d]!==void 0&&s[d]!==""&&(l[a][m]=s[d])}),Object.keys(l[a]).length===0&&delete l[a]}),Object.keys(l).length>0&&t.append("additional_data",JSON.stringify(l)),t.append("_method","PUT"),$.post(route("case.update",i.id),t,{forceFormData:!0,onSuccess:()=>r(!1),onError:()=>r(!1)})},[i.id,c]),v=o.useCallback((s,r,t)=>{s(r,null),t(null)},[]),q=o.useCallback(s=>{T(r=>({...r,[s]:!r[s]}))},[]),U=o.useCallback((s,r,t,n,l)=>{const a=`${s}_${r}`,m=n[a]||"";switch(t.type){case"summernote":return e.jsx(ae,{value:m,onChange:d=>l(a,d),placeholder:`Enter ${t.label.toLowerCase()}`,height:200,showToggle:!0,defaultMode:"simple"});case"textarea":return e.jsx(I,{id:a,name:a,value:m,onChange:d=>l(a,d.target.value),placeholder:`Enter ${t.label.toLowerCase()}`,rows:3});case"number":return e.jsx(b,{id:a,name:a,type:"number",value:m,onChange:d=>l(a,d.target.value),placeholder:`Enter ${t.label.toLowerCase()}`,step:"0.01"});default:return e.jsx(b,{id:a,name:a,type:"text",value:m,onChange:d=>l(a,d.target.value),placeholder:`Enter ${t.label.toLowerCase()}`})}},[]),R=o.useCallback(()=>{const s={title:i.title||"",slug:i.slug||"",description:i.description||"",image:i.image||null,thumbnail:i.thumbnail||null,status:i.status||"",priority:i.priority||0},r=i.data?JSON.parse(i.data):{};return Object.keys(c).forEach(t=>{Object.keys(c[t]).forEach(n=>{var a;const l=`${t}_${n}`;s[l]=((a=r[t])==null?void 0:a[n])||""})}),s},[i,c]),[A,E]=o.useState(!1),[_,L]=o.useState(!1),[z,P]=o.useState(!1);return e.jsxs(Q,{children:[e.jsx(B,{title:`Edit caselist - ${i.title}`}),e.jsx("div",{className:"flex flex-1 flex-col",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2 p-10",children:e.jsx("div",{className:"w-full",children:e.jsx(Z,{initialValues:R(),validationSchema:D,onSubmit:F,children:({isSubmitting:s,setFieldValue:r,values:t})=>e.jsxs(K,{className:"space-y-6 bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit caselist"}),e.jsx("p",{className:"text-gray-600",children:"Update caselist information"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"caselist Title *"}),e.jsx(j,{as:b,id:"title",name:"title",placeholder:"Enter caselist title"}),e.jsx(g,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"slug",className:"text-sm font-medium",children:"caselist Slug *"}),e.jsx(j,{as:b,id:"slug",name:"slug",placeholder:"Enter caselist slug"}),e.jsx(g,{name:"slug",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description *"}),e.jsx(j,{as:I,id:"description",name:"description",placeholder:"Enter caselist description",rows:4}),e.jsx(g,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),e.jsxs(X,{name:"status",value:t.status,onValueChange:n=>r("status",n),children:[e.jsx(G,{children:e.jsx(H,{placeholder:"Select status"})}),e.jsxs(Y,{children:[e.jsx(O,{value:"published",children:"Published"}),e.jsx(O,{value:"draft",children:"Draft"})]})]}),e.jsx(g,{name:"status",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"priority",className:"text-sm font-medium",children:"Priority (0-100) *"}),e.jsx(j,{as:b,id:"priority",name:"priority",type:"number",min:"0",max:"100",placeholder:"0"}),e.jsx(g,{name:"priority",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"Feature Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>E(!0),className:"w-full",children:x?"Change Media":"Add Media"}),e.jsx(y,{routename:route("case.edit",i.id),showModal:A,setShowModal:E,setFieldValue:r,fieldName:"featured",setImagePreview:k}),x&&e.jsxs("div",{className:"relative mt-4 inline-block",children:[e.jsx("img",{src:typeof x=="string"?x:URL.createObjectURL(x),alt:"caselist Preview",className:"w-24 h-24 object-cover rounded-lg"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:()=>v(r,"featured",k),children:e.jsx(w,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"image",className:"text-sm font-medium",children:"caselist Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>L(!0),className:"w-full",children:h?"Change Media":"Add Media"}),e.jsx(y,{routename:route("case.edit",i.id),showModal:_,setShowModal:L,setFieldValue:r,fieldName:"image",setImagePreview:S}),h&&e.jsxs("div",{className:"relative mt-4 inline-block",children:[e.jsx("img",{src:typeof h=="string"?h:URL.createObjectURL(h),alt:"caselist Preview",className:"w-24 h-24 object-cover rounded-lg"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:()=>v(r,"image",S),children:e.jsx(w,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-sm font-medium",children:"Thumbnail Image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>P(!0),className:"w-full",children:p?"Change Media":"Add Media"}),e.jsx(y,{routename:route("case.edit",i.id),showModal:z,setShowModal:P,setFieldValue:r,fieldName:"thumbnail",setImagePreview:C}),p&&e.jsxs("div",{className:"relative mt-4 inline-block",children:[e.jsx("img",{src:typeof p=="string"?p:URL.createObjectURL(p),alt:"Thumbnail Preview",className:"w-24 h-24 object-cover rounded-lg"}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:()=>v(r,"thumbnail",C),children:e.jsx(w,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Additional Information"}),Object.keys(c).map(n=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("button",{type:"button",className:"w-full px-4 py-3 text-left flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",onClick:()=>q(n),children:[e.jsx("span",{className:"font-medium capitalize",children:n.replace("_"," ")}),M[n]?e.jsx(te,{className:"h-4 w-4 transition-transform"}):e.jsx(W,{className:"h-4 w-4 transition-transform"})]}),M[n]&&e.jsx("div",{className:"p-4 space-y-4 border-t bg-white",children:Object.keys(c[n]).map(l=>{const a=c[n][l],m=`${n}_${l}`;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:m,className:"text-sm font-medium text-gray-700",children:[a.label,a.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),U(n,l,a,t,r)]},l)})})]},n))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>$.get(route("case.index")),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:s,children:s?"Updating...":"Update caselist"})]})]})})})})})]})}export{ke as default};
